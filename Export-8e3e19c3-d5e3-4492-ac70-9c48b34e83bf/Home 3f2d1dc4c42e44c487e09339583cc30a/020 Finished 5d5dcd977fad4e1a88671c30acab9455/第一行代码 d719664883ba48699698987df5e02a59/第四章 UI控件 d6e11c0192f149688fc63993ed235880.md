# ç¬¬å››ç«  UIæ§ä»¶

# 4.3 ä¸‰ç§åŸºæœ¬å¸ƒå±€

## 4.3.1 Linear layout

### layout_gravity & gravity

`android:gravity` ç”¨äºæŒ‡å®šæ–‡å­—åœ¨æ§ä»¶ä¸­çš„å¯¹é½æ–¹å¼ï¼Œ

`android:layout_gravity`ç”¨äºæŒ‡å®šæ§ä»¶åœ¨å¸ƒå±€ä¸­çš„ å¯¹é½æ–¹å¼ã€‚

## **4.3.2 RelativeLayout**

é€šè¿‡å„ç§æè¿°çº¦æŸæ¥å®ç°æ§ä»¶ç›¸å½“äºçˆ¶è§†å›¾æˆ–è€…åŒçº§è§†å›¾çš„ç›¸å¯¹ä½ç½®æ¥å®ç°å¸ƒå±€

`android:layout_alignParentLeft`

`android:layout_toRightOf`

## **4.3.3 FrameLayout**

è¿™ç§å¸ƒå±€æ²¡æœ‰ä¸°å¯Œçš„å®šä½æ–¹å¼ï¼Œæ‰€æœ‰çš„æ§ä»¶éƒ½ä¼šé»˜è®¤æ‘†æ”¾åœ¨å¸ƒå±€çš„å·¦ä¸Šè§’ã€‚

é™¤äº†è¿™ç§é»˜è®¤æ•ˆæœä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨layout_gravityå±æ€§æ¥æŒ‡å®šæ§ä»¶åœ¨å¸ƒå±€ä¸­çš„ å¯¹é½æ–¹å¼ï¼Œè¿™å’ŒLinearLayoutä¸­çš„ç”¨æ³•æ˜¯ç›¸ä¼¼çš„ã€‚

# **4.4** ç³»ç»Ÿæ§ä»¶ä¸å¤Ÿç”¨?åˆ›å»ºè‡ªå®šä¹‰æ§ä»¶

æˆ‘ä»¬æ‰€ç”¨çš„æ‰€æœ‰æ§ä»¶éƒ½æ˜¯ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ªViewçš„ï¼Œæ‰€ç”¨çš„æ‰€æœ‰å¸ƒå±€éƒ½æ˜¯ç›´æ¥æˆ–é—´ æ¥ç»§æ‰¿è‡ªViewGroupçš„ã€‚

## **4.4.1** å¼•å…¥å¸ƒå±€

å¦‚ä½•åœ¨ç¨‹åºä¸­ä½¿ç”¨å®šä¹‰å¥½çš„æ ‡é¢˜æ ï¼ˆå¸ƒå±€ï¼‰ï¼Ÿ

<aside>
ğŸ’¡ ç»ˆæé—®é¢˜åœ¨è¿™é‡Œè§£å†³ï¼ğŸ‘

**é€šè¿‡includeè¯­å¥å³å¯åœ¨å½“å‰å¸ƒå±€æ–‡ä»¶ä¸­åŒ…å«å…¶ä»–å¸ƒå±€æ–‡ä»¶**

</aside>

```swift
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <include layout="@layout/title" />
</LinearLayout>
```

## **4.4.2** åˆ›å»ºè‡ªå®šä¹‰æ§ä»¶

åˆ›å»ºè‡ªå®šä¹‰æ§ä»¶ï¼Œå¯ä»¥ä¸ºæ§ä»¶æä¾›ç‰¹å®šçš„æ–¹æ³•ç­‰å±æ€§ï¼Œæ— éœ€æ¯æ¬¡é‡å¤è®¾ç½®

è‡ªå®šä¹‰æ§ä»¶å…¶å®ä¹Ÿæ˜¯é€šè¿‡ç±»ç»§æ‰¿æ¥å®ç°

```swift
class TitleLayout(context: Context, attrs: AttributeSet) : LinearLayout(context, attrs) {
    init {
        LayoutInflater.from(context).inflate(R.layout.title, this)
} }
```

è¿™é‡Œæˆ‘ä»¬åœ¨TitleLayoutçš„ä¸»æ„é€ å‡½æ•°ä¸­å£°æ˜äº†Contextå’ŒAttributeSetè¿™ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨å¸ƒå±€ä¸­å¼•å…¥TitleLayoutæ§ä»¶æ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°ã€‚

ç„¶ååœ¨initç»“æ„ä½“ä¸­éœ€è¦å¯¹æ ‡é¢˜æ å¸ƒå±€è¿›è¡ŒåŠ¨æ€åŠ è½½ï¼Œè¿™å°±è¦å€ŸåŠ©LayoutInflateræ¥å®ç°äº†ã€‚é€šè¿‡LayoutInflaterçš„from()æ–¹æ³•å¯ä»¥æ„å»ºå‡º ä¸€ä¸ªLayoutInflaterå¯¹è±¡ï¼Œç„¶åè°ƒç”¨inflate()æ–¹æ³•å°±å¯ä»¥åŠ¨æ€åŠ è½½ä¸€ä¸ªå¸ƒå±€æ–‡ä»¶ã€‚ 

inflate()æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°:

- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦åŠ è½½çš„å¸ƒå±€æ–‡ä»¶çš„idï¼Œè¿™é‡Œæˆ‘ä»¬ä¼ å…¥ R.layout.title;
- ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç»™åŠ è½½å¥½çš„å¸ƒå±€å†æ·»åŠ ä¸€ä¸ªçˆ¶å¸ƒå±€ï¼Œè¿™é‡Œæˆ‘ä»¬æƒ³è¦æŒ‡å®šä¸º TitleLayoutï¼Œäºæ˜¯ç›´æ¥ä¼ å…¥thisã€‚

### è¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ è¿™ä¸ªè‡ªå®šä¹‰æ§ä»¶

æ·»åŠ æ—¶å€™éœ€è¦å¸¦ä¸Šå®Œæ•´çš„åŒ…å

```swift
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <com.example.uicustomviews.TitleLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</LinearLayout>
```

# 4.5 ListView

## **4.5.1 ListView**çš„ç®€å•ç”¨æ³•

```swift
class MainActivity : AppCompatActivity() {
    private val data = listOf("Apple", "Banana", "Orange", "Watermelon",
        "Pear", "Grape", "Pineapple", "Strawberry", "Cherry", "Mango",
        "Apple", "Banana", "Orange", "Watermelon", "Pear", "Grape",
        "Pineapple", "Strawberry", "Cherry", "Mango")
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val adapter = ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,data)
        listView.adapter = adapter
} }
```

é›†åˆä¸­çš„æ•°æ®æ˜¯æ— æ³•ç›´æ¥ä¼ é€’ç»™ListViewçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å€ŸåŠ©é€‚é…å™¨æ¥å®Œæˆã€‚Android ä¸­æä¾›äº†å¾ˆå¤šé€‚é…å™¨çš„å®ç°ç±»ï¼Œå…¶ä¸­æˆ‘è®¤ä¸ºæœ€å¥½ç”¨çš„å°±æ˜¯ArrayAdapterã€‚

`android.R.layout.simple_list_item_1`ä½œä¸ºListViewå­é¡¹å¸ƒå±€çš„idï¼Œè¿™æ˜¯ä¸€ä¸ª Androidå†…ç½®çš„å¸ƒå±€æ–‡ä»¶ï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªTextViewï¼Œå¯ç”¨äºç®€å•åœ°æ˜¾ç¤ºä¸€æ®µæ–‡æœ¬ã€‚

## **4.5.2** å®šåˆ¶**ListView**çš„ç•Œé¢

ä¸»è¦æ˜¯å®šåˆ¶Adapterï¼Œé€šè¿‡é‡å†™getViewæ–¹æ³•æ¥å®ç°ã€‚

```swift
class FruitAdapter(activity: Activity, val resourceId: Int, data: List<Fruit>) :
        ArrayAdapter<Fruit>(activity, resourceId, data) {
    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
        val view = LayoutInflater.from(context).inflate(resourceId, parent, false)
        val fruitImage: ImageView = view.findViewById(R.id.fruitImage)
        val fruitName: TextView = view.findViewById(R.id.fruitName)
				val fruit = getItem(position) // è·å–å½“å‰é¡¹çš„Fruitå®ä¾‹ 
				if (fruit != null) {
            fruitImage.setImageResource(fruit.imageId)
						fruitName.text = fruit.name
		        }
				return view }
}
```

## **4.5.3** æå‡**ListView**çš„è¿è¡Œæ•ˆç‡

- getView()æ–¹æ³•ä¸­è¿˜æœ‰ä¸€ä¸ªconvertViewå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ç”¨äºå°†ä¹‹å‰åŠ  è½½å¥½çš„å¸ƒå±€è¿›è¡Œç¼“å­˜ï¼Œä»¥ä¾¿ä¹‹åè¿›è¡Œé‡ç”¨
- æ–°å¢äº†ä¸€ä¸ªå†…éƒ¨ç±»ViewHolderï¼Œç”¨äºå¯¹ImageViewå’ŒTextViewçš„æ§ä»¶å®ä¾‹è¿›è¡Œç¼“å­˜ï¼Œ Kotlinä¸­ä½¿ç”¨inner classå…³é”®å­—æ¥å®šä¹‰å†…éƒ¨ç±»ã€‚å½“convertViewä¸ºnullçš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ª ViewHolderå¯¹è±¡ï¼Œå¹¶å°†æ§ä»¶çš„å®ä¾‹å­˜æ”¾åœ¨ViewHolderé‡Œï¼Œç„¶åè°ƒç”¨Viewçš„setTag()æ–¹ æ³•ï¼Œå°†ViewHolderå¯¹è±¡å­˜å‚¨åœ¨Viewä¸­ã€‚å½“convertViewä¸ä¸ºnullçš„æ—¶å€™ï¼Œåˆ™è°ƒç”¨Viewçš„ getTag()æ–¹æ³•ï¼ŒæŠŠViewHolderé‡æ–°å–å‡ºã€‚è¿™æ ·æ‰€æœ‰æ§ä»¶çš„å®ä¾‹éƒ½ç¼“å­˜åœ¨äº†ViewHolderé‡Œï¼Œ å°±æ²¡æœ‰å¿…è¦æ¯æ¬¡éƒ½é€šè¿‡findViewById()æ–¹æ³•æ¥è·å–æ§ä»¶å®ä¾‹äº†