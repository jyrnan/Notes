# 4 åŸºäºå¯¹è±¡çš„ç¼–ç¨‹é£æ ¼

ä¸€èˆ¬è€Œè¨€ï¼Œclassç”±ä¸¤éƒ¨åˆ†ç»„æˆ

- publicï¼šæ“ä½œå‡½æ•°å’Œè¿ç®—ç¬¦
- privateï¼šå®ç°ç»†èŠ‚

è¿™ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬å°†ä»classçš„ä½¿ç”¨æå‡åˆ°classåˆ°è®¾è®¡ä¸å®ç°ã€‚

# 4.1 å¦‚ä½•å®ç°ä¸€ä¸ª Class

ç±»çš„å‰ç½®å£°æ˜ï¼ˆforward declarationï¼‰

```cpp
class Stackï¼› //å‰ç½®å£°æ˜ï¼Œ

//æ¥ä¸‹æ¥å¯ä»¥ç”¨
Stack *pt = 0; //å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆ
void process(const Stack&); //ä»¥Stackä½œä¸ºæ•°æ®ç±»å‹
```

## å®šä¹‰

```cpp
class Stack {
public:
    bool push( const  string&);
    bool pop( string& elem);
    bool peek( string& elem);
    
    bool empty();
    bool full();
    
    int size() {return _stack.size();}
    
private:
    vector<string> _stack;
};
```

> Publicå¯ä»¥åœ¨ç¨‹åºä»»ä½•ä½ç½®è®¿é—®ï¼›
privateï¼šåªèƒ½æ˜¯member functionæˆ–è€…class friendè®¿é—®
> 

æ‰€æœ‰çš„member functionéƒ½å¿…é¡»åœ¨classä¸»ä½“å†…éƒ¨**å£°æ˜**ã€‚ä½†æ— é¡»åœ¨ä¸»ä½“å†…**å®šä¹‰**

å¦‚æœåœ¨ä¸»ä½“å†…å®šä¹‰ï¼Œé»˜è®¤ä¸º**`inline`**å‡½æ•°ã€‚`inline` å¯ä»¥åœ¨classå†…æˆ–å¤–éƒ¨

<aside>
ğŸ’¡ ä»¥ä¸Šå†…å®¹ä¸€èˆ¬æ”¾åœ¨headæ–‡ä»¶ä¸­

</aside>

## åœ¨classä¸»ä½“å¤–å®šä¹‰

<aside>
ğŸ’¡ å¯ä»¥åœ¨å®ç°æ–‡ä»¶ä¸­å†™å…¥å…·ä½“çš„å®ç°ä»£ç ï¼Œ

</aside>

åŒæ—¶è¿™æ˜¯åœ¨classä¸»ä½“ä¹‹å¤–ï¼Œæ‰€ä»¥æœ‰ç‰¹æ®Šæ ¼å¼

```cpp
inline bool
Stack::empty() {
    return _stack.empty();
}

bool
Stack::pop( string &elem) {
    if (empty()){
        return false;
    }
    
    elem = _stack.back();
    _stack.pop_back();
    return true;
}
```

# 4.2 ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°å’Œææ„å‡½æ•°

## æ„é€ å‡½æ•° constructor

- åç§°å¿…é¡»å’Œç±»åç§°ç›¸åŒã€‚
- ä¸åº”è¿”å›ç±»å‹æˆ–ä»»ä½•å€¼ã€‚
- å¯ä»¥è¢«é‡è½½

ä¸€äº›ä»¤äººè¿·æƒ‘çš„æƒ…å†µï¼š

```cpp
Triangular t3 = 8ï¼› // è¿™æ˜¯è°ƒç”¨æ„é€ å™¨è¿˜æ˜¯èµ‹å€¼ï¼Ÿï¼å¤ªè¿·æƒ‘äº†å§ã€‚å±…ç„¶æ˜¯è°ƒç”¨å•ä¸€å‚æ•°çš„æ„é€ å™¨

Triangular t5(); //å±…ç„¶ä¸èƒ½è°ƒç”¨é»˜è®¤æ„é€ å™¨ï¼Œå› ä¸ºè¿™ä¸ªå’ŒCè¯­è¨€çš„å‡½æ•°ä¸€è‡´ï¼Œä¼šè¢«è§†ä¸ºå‡½æ•°ã€‚
Triangular t5; //è¿™æ ·å°±å¯ä»¥äº†OK
```

## Member Initialization List

```cpp
Triangular::Triangular( const Triangular &rhs ) : _length( rhs._length ), _beg_pos( rhs. _beg_pos ), _next( rhs._beg_pos-1 )
{} //ç©ºçš„
```

å¦‚æœæ˜¯æœ‰å¤šä¸ªå†…éƒ¨å˜é‡éœ€è¦èµ‹å€¼ï¼Œå¯ä»¥è®¾ç½®ä¼ å…¥éƒ¨åˆ†å‚æ•°ï¼Œå‰©ä½™é€šè¿‡è¿™ç§æ–¹å¼èµ‹å€¼

## destructor

```cpp
ï½ClassName()
```

æ²¡æœ‰è¿”å›å€¼ï¼Œæ²¡æœ‰å‚æ•°ï¼Œä¹Ÿä¸èƒ½è¢«é‡è½½

## æˆå‘˜é€ä¸€åˆå§‹åŒ–

```cpp
Matrix::Matrix( const Matrix &rhs ) : _row( rhs.row ), _col( rhs.col )
{
	... //éœ€è¦åœ¨è¿™ä¸ªåˆå§‹åŒ–é‡Œå¯¹äºå¼•ç”¨çš„å§å˜é‡åœ¨è¿›è¡Œèµ‹å€¼æ—¶å…ˆå¤åˆ¶ä¸€ä»½ã€‚ä»¥é˜²æ­¢ä¸¤ä¸ªå¼•ç”¨éƒ½æŒ‡å‘åŒä¸€ä¸ªï¼Œåè€…ææ„åå¯¼è‡´å‰è€…æŒ‡é’ˆå¤±å»ä½œç”¨
}
```

# 4.3 mutable & const

classçš„ çš„å†…å®¹è®¾è®¡è€…å¿…é¡»åœ¨member functionèº«ä¸Š æ ‡æ³¨constï¼Œä»¥æ­¤å‘Šè¯‰ç¼–è¯‘å™¨ï¼šè¿™ä¸ªmember functionæ—¶å¹¶ä¸ä¼šæ›´æ”¹class object

conståœ¨å‚æ•°åˆ—è¡¨ä¹‹åï¼Œå’Œä»£ç ä¹‹é—´åŠ å…¥

```cpp
int lenght() const { return _length; }
```

Non const class

# 4.4 ä»€ä¹ˆæ˜¯thisæŒ‡é’ˆ

thisæŒ‡é’ˆç³»åœ¨member functionå†…ç”¨æ¥æŒ‡å‘è°ƒç”¨è€…ï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚åœ¨å†…éƒ¨å·¥ä½œä¸­ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°†thisæŒ‡é’ˆåŠ åˆ°æ¯ä¸€ä¸ªmember functionçš„å‚æ•°åˆ—è¡¨ã€‚

```cpp
Triangular& Triangular::
copy( Triangular *this, const Triangular &rhs) //è¿™ä¸ª*thisæ˜¯è‡ªåŠ¨æ·»åŠ çš„
{
	this->_length = rhs._length;
	...
	
	return *this //è¿”å›thisæ‰€æŒ‡çš„å†…å®¹
}
```

# 4.5 é™æ€ç±»æˆå‘˜

## **static data member**

ç”¨æ¥è¡¨ç¤ºå”¯ä¸€çš„ã€å¯å…±äº«çš„memberã€‚ ä»–å¯ä»¥åœ¨åŒä¸€ç±»çš„æ‰€æœ‰å¯¹è±¡ä¸­è¢«è®¿é—®ã€‚

```cpp
class Triangular {
public:
	//...
private:
	static vector<int> elemts;
	stat
};
```

## å’Œå…¨å±€å˜é‡çš„åŒºåˆ«

staticåç§°å¿…é¡»é™„ä¸Šclass scopeè¿ç®—ç¬¦

```cpp
vector<int> Triangular::elems;
```

## Static Member Function(é™æ€æˆå‘˜å‡½æ•°)

static member functionå¯ä»¥åœ¨ä¸â€œä»»ä½•å¯¹è±¡éƒ½æ— ç“œè‘›â€çš„æƒ…å½¢ä¸‹è¢«è°ƒç”¨ï¼Œåªæœ‰åœ¨ä¸è®¿é—®ä»»ä½•non-static memberçš„æ¡ä»¶ä¸‹æ‰èƒ½è¢«å£°æ˜æˆstatic

# 4.6 æ‰“é€ ä¸€ä¸ªiterator Clas

## åµŒå¥—ç±»å‹

åˆ©ç”¨`typedef exiting_type new_name`

# 4.7 åˆä½œå…³ç³»å¿…é¡»å»ºç«‹åœ¨å‹è°Šçš„åŸºç¡€ä¸Š

## friend

ä»»ä½•classå¯ä»¥å°†å…¶ä»–fucntionæˆ–è€…classæŒ‡å®šä¸ºfriendï¼Œå…·å¤‡äº†ä¸ class member functionç›¸åŒçš„è®¿é—®æƒé™ï¼Œå¯ä»¥è®¿é—®classå’Œprivate member

```cpp
class Triangular {
	friend int operator*( const Triangular_iterator &rhs );
	//...
};
```

ä¾‹å¦‚

```cpp
//ä¸‹é¢å½¢å¼
class Triangular {
	friend int Triangualr_interator::operator*();
	friend int Triangualr_interator::check_integrity();
};
```

å¯ä»¥é€šè¿‡æ•´ä¸ªç±»æ˜¯friendæ¥å®ç°æ‰€æœ‰çš„member fucntionæˆä¸ºæŸä¸ªç±»çš„friend

```cpp
class Triangualr {
	friend class Triangular_iterator;
	//...
};
```

> friendæ¨¡å¼æ˜¯ä¸€ç§å¿«é€Ÿæ¨¡å¼ï¼Œå…¶å®å¯ä»¥é€šè¿‡åœ¨publicåŒºåŸŸå®šä¹‰æŸäº›mfmberçš„è®¿é—®å‡½æ•°æ¥å®ç°
> 

# 4.8 å®ç°ä¸€ä¸ªcopy assignment operator

å®ç°èµ‹å€¼æ“ä½œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¦åˆ¤æ–­æ˜¯ä¸æ˜¯èµ‹å€¼ç»™è‡ªå·±è¿™ä¸ªæ“ä½œéœ€è¦å•ç‹¬è€ƒè™‘ï¼ˆä¾¯æ·è§†é¢‘æåˆ°ï¼‰

# 4.9 å®ç°ä¸€ä¸ªfunction object

ä¸€ç§â€œæä¾›æœ‰function callè¿ç®—ç¬¦ï¼‰çš„class

é€šè¿‡å†…éƒ¨å®ç°ä¸€ä¸ªoperate()æ–¹æ³•æ¥äº‹å…ˆæ–¹æ³•åŠŸèƒ½ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨operator()æ¥å®ç°

```cpp
class LessThan {
public:
    LessThan(int val) : _val(val){}
    int comp_val() const {return _val;} // åŸºå€¼çš„è¯»å–
    void comp_val(int nval) {_val = nval;} // åŸºå€¼çš„å†™å…¥
    
    bool operator()(int _value) const; //**è¿™æ˜¯å®ç°function objectçš„æ ¸å¿ƒ**
    
private:
    int _val;
};

inline bool  LessThan::
operator()(int value) const {return value < _val;} //**è¿™æ˜¯å®ç°function objectçš„æ ¸å¿ƒ

//ä½¿ç”¨**
LessThan lt10(10); //åˆå§‹åŒ–ï¼Œå¹¶è®¾ç½®å†…éƒ¨çš„åŸºå€¼ä¸º10
bool b = lt10(9);
cout <<  b << endl;
```

# 4.10é‡è½½iostreamè¿ç®—ç¬¦

# 4.11 æŒ‡é’ˆï¼ŒæŒ‡å‘Class member Function

```cpp
void (num_sequence::*pm)(int) = 0 //ç±»é‡Œé¢æˆå‘˜å‡½æ•°æŒ‡é’ˆéœ€è¦å…ˆæŒ‡å®šç±»å
```

> è¿™æ ·æ˜¯å°†pmå£°æ˜æˆä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘num_sequenceç±»çš„member functionï¼Œåè€…çš„è¿”å›å€¼æ˜¯voidå¹¶ ä¸”åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œç±»å‹æ˜¯intã€‚pmçš„åˆå§‹å€¼æ˜¯0è¡¨ç¤ºå®ƒç›®å‰å¹¶ä¸æŒ‡å‘ä»»ä½•member function
> 

## ç®€åŒ–æ–¹å¼

åˆ©ç”¨typedefæ¥ç®€åŒ–

```cpp
typedef void (num_sequence::*PtrType)(int);
PtrType pm = 0;
```

## å¯¹å‡½æ•°åç§°å–åœ°å€

ä¸ºäº†å–å¾—æŸä¸ªmember functionçš„åœ°å€ï¼Œæˆ‘ä»¬å¯¹å‡½æ•°åç§° åº”ç”¨å–å€è¿ç®—ç¬¦ã€‚å‡½æ•°åç§°å‰éœ€è¦åŠ ä»¥class scopeè¿ç®—ç¬¦åŠ ä»¥é™å®šï¼Œè¿”å›ç±»å‹å’Œå‚æ•°éƒ½ä¸ç”¨æŒ‡æ˜

å…ˆå»ºç«‹ç±»

```cpp
class num_sequence {
public:
    typedef void (num_sequence::*PtrType)(int); //å…ˆåˆ›å»ºä¸€ä¸ªç±»å‹å®šä¹‰
    
    //_pmfå¯æŒ‡å‘ä¸‹åˆ—ä»»ä½•å‡½æ•°
    void fibonoacci( int );
    void pell( int );
    //...
    
private:
    PtrType _pmf;
};
```

èµ‹å€¼

```cpp
PtrType pm = &num_sequence::fibonacci; //å®šä¹‰å¹¶èµ‹å€¼
pm = &num_sequence::pell; //é‡æ–°èµ‹å€¼
```

åé¢çš„èŒƒä¾‹çœ‹çš„ä¸æ˜¯å¾ˆæ˜ç™½ğŸ˜³