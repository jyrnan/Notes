# iOS17æ–°åŠŸèƒ½

# ScrollView by @CreaTECH

[Enhancements to ScrollView in iOS 17](https://www.youtube.com/watch?v=8YHbhSmiKwU)

è¿™ç¯‡è§†é¢‘è§£é‡Šå¾—å¾ˆä¸é”™

## Part1

### å®ç°å‘¨å›´ç©ºç™½

`.contentMargins(.horizontal, 10, for: .scrollContent)`

æ³¨æ„ï¼š è¿™ä¸ªmarginä¼šåº”ç”¨ScrollViewçš„æ˜¾ç¤ºåŒºåŸŸï¼Œä»è€Œå½±å“åˆ°contentå†…éƒ¨æ¯ä¸ªè§†å›¾ï¼Œè®©å…¶åœ¨ScrollViewçš„æ˜¾ç¤ºåŒºä¸­æ˜¾ç¤ºçš„æ—¶å€™éƒ½æœ‰ç›¸åº”çš„marginï¼Œè€Œå¹¶ä¸æ˜¯åªæ˜¯ç»™ç¬¬ä¸€ä¸ªè§†å›¾äº§ç”Ÿæ•ˆæœã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­è¿™äº›è‰²å—æœ¬æ¥æ˜¯è®¾ç½®æˆåˆšå¥½æ˜¯ç­‰åŒå±å¹•å®½åº¦ï¼Œä½†æ˜¯ç°åœ¨éƒ½å› ä¸ºmarginçš„è®¾ç½®ï¼Œæ‰€ä»¥æ°´å¹³æ–¹å‘éƒ½å‡å°‘äº†ã€‚

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%201.png)

### é˜²æ­¢å†…å®¹å‰ªåˆ‡

ä¾‹å¦‚é˜´å½± "To clip or not clip the content in a scroll viewâ€

`.scrollClipDisabled()`

### é»˜è®¤æ»šåŠ¨å®šä½

"Specify the default scroll position when the scrollview loadsâ€

`.defaultScrollAnchor(.center)`

## Part2

### æ»šåŠ¨æ—¶ä¾æ®å†…å®¹è¾¹ç•Œå®šä½

å¯ä»¥å®ç°æ»šåŠ¨æ—¶å€™ä¾æ®æ»šåŠ¨å†…å®¹çš„è¾¹ç•Œè¿›è¡Œå®šä½ã€‚

```jsx
ScrollView(.horizontal) {
                        HStack {
                            ForEach(ImageAsset.all) { asset in
                                Image(asset.name)
                                    .resizable()
                                    .scaledToFit()
//                                    .frame(width: 300, height: 225)
                                    .containerRelativeFrame(.horizontal)
                            }
                        }
                        .scrollTargetLayout() //
                    }
                    .contentMargins(.horizontal, 10, for: .scrollContent)
                    .scrollTargetBehavior(.viewAligned) //
										.scrollPosition(id: $scrollID) //ç»‘å®šå½“å‰ä½ç½®åˆ°id
```

- `.containerRelativeFrame(.horizontal)` å®ç°å†…å®¹å’Œå®¹å™¨å®½åº¦ä¸€ç›´ï¼Œä¾‹å¦‚å±å¹•å®½åº¦
- `.scrollTargetLayout()`  `.scrollTargetBehavior(.viewAligned)` è¿™äºŒè€…é…åˆå¯ä»¥å®ç°æ»šåŠ¨çš„æ—¶å€™ä¾æ®æ˜¾ç¤ºviewçš„å°ºå¯¸è¿›è¡Œå®šä½

### ä¾æ®Viewçš„IDæ¥è¿›è¡Œæ»šåŠ¨å®šä½

Associates a binding to be updated when a scroll view within this view scrolls.

åŒ…å«ä¸¤æ–¹é¢ï¼š

- ScrollView æ»šåŠ¨æ—¶å€™ä¼šåŠ¨æ€æ›´æ–°å½“å‰Viewçš„IDåˆ°ç»‘å®šå€¼
- ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥è®¾ç½®ç»‘å®šçš„IDï¼Œè®©ScrollViewæ»šåŠ¨åˆ°è¯¥IDä»£è¡¨åˆ°View

<aside>
ğŸ’¡ IDçš„æ€§è´¨åº”è¯¥å’ŒScrollViewé‡Œé¢çš„Viewæœ¬èº«çš„identifyä¸€è‡´ï¼Œä¾‹å¦‚ForEachç­‰Viewå®ç°æ—¶å€™éœ€è¦æ•°æ®å®ç°identifiableï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›Viewæœ¬èº«è¦å…·æœ‰idå±æ€§ï¼Œè¿™æ ·æ‰èƒ½å’Œ`.scrollPosition(id:)` æ–¹æ³•ä¸­çš„idå±æ€§è¿›è¡ŒåŒæ­¥ç»‘å®šæ›´æ–°

</aside>

`.scrollPosition(id: $scrollID)`

ä¹Ÿæ˜¯éœ€è¦æ­é…`.scrollTargetLayout()`  ä½¿ç”¨

```jsx
@Binding var items: [Item]
@Binding var scrolledID: Item.ID?

ScrollView {
    LazyVStack {
        ForEach(items) { item in
            ItemView(item)
        }
    }
    .scrollTargetLayout()
}
.scrollPosition(id: $scrolledID)
```

<aside>
ğŸ’¡ è¿™ä¸ªå¯ä»¥å–ä»£ä½ç‰ˆæœ¬çš„ScrollViewProxyæ¥å®ç°æ»šåŠ¨å®šä½

</aside>

## Part3

### ScrollTransition

è¿™ä¸ªåŠŸèƒ½ä¸»è¦æ˜¯å®ç°ScrollViewé‡Œé¢è¿›å…¥å’Œå‡ºå»çš„è¯•å›¾è¿›è¡Œä¸€å®šç¨‹åº¦çš„å˜åŒ–

Applies the given transition, animating between the phases of the transition as this view appears and disappears within the visible region of the containing scroll view, or other container specified using theÂ `coordinateSpace`Â parameter.

```swift
ScrollView(.vertical) {
                    ForEach(ImageAsset.all) { asset in
                        Image(asset.name)
                            .resizable()
                            .scaledToFit()
                            .frame(width: 300, height: 225)
                            .scrollTransition { content, phase in
                                content
                                    .opacity(phase.isIdentity ? 1.0 : 0.3)
                                    .scaleEffect(phase.isIdentity ? 1.0 : 0.3)
                            }
                }
            }
```

åŸºæœ¬æ–¹æ³•

- å¯¹æ¯ä¸ªå­Viewå®ç°
- transitionæ–¹æ³•ä¸¤ä¸ªå‚æ•°ï¼š
    - contentï¼š ä¼ å…¥çš„åŸå§‹å†…å®¹ï¼Œå˜å½¢çš„æœ¬ä½“
    - phaseï¼šä¼ å…¥å†…å®¹çš„é˜¶æ®µï¼Œä¾‹å¦‚ï¼šç¦»å¼€/è¿›å…¥
        - valueï¼š -1ï¼Œ 0ï¼Œ 1 åˆ†åˆ«æ˜¯ç¦»å¼€ å½“å‰ è¿›å…¥çŠ¶æ€
        - isIdentity: Bool  åˆ†åˆ«æ˜¯ç¦»å¼€æˆ–å½“å‰
        - 
        

# By Paul

[Level up your SwiftUI â€“ Easy improvements you can apply to any SwiftUI app](https://www.youtube.com/watch?v=l7eut-nYIUc&t=524s)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%202.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%203.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%204.png)

å¤æ•°å¤„ç†

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%205.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%206.png)

æ–‡å­—è¡Œæ•°å¤„ç†

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%207.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%208.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%209.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2010.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2011.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2012.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2013.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2014.png)

### æŸ¥æ‰¾æœªé‚

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2015.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2016.png)

è¿˜å¯ä»¥åˆ›å»ºåŠ¨ä½œ

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2017.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2018.png)

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2019.png)

ç”¨æ³•

![Untitled](iOS17%E6%96%B0%E5%8A%9F%E8%83%BD%203c4d7b68ef254828a7d22e511c235dc9/Untitled%2020.png)

ä¸Šå›¾è¿˜éœ€è¦æ·»åŠ else æŠŠscrollViewåŒ…è¿›å»