# ä»å“åº”å¼ç¼–ç¨‹åˆ° Combine å®è·µ

[0](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/0)

**åŠ¨æ‰‹ç‚¹å…³æ³¨ å¹²è´§ä¸è¿·è·¯** ğŸ‘†

> å¤§çº¦ä¸€å¹´å‰ï¼ŒResso æ¥å…¥äº† Combineï¼Œåˆ©ç”¨å“åº”å¼ç¼–ç¨‹ç®€åŒ–äº†ä»£ç é€»è¾‘ï¼Œä¹Ÿç§¯ç´¯äº†å¾ˆå¤šå®è·µç»éªŒã€‚æœ¬æ–‡ä¼šä»å“åº”å¼ç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³å¹¶é€æ­¥æ·±å…¥ä»‹ç» Combine çš„æ¦‚å¿µä¸æœ€ä½³å®è·µï¼Œ å¸Œæœ›èƒ½å¸®åŠ©æ›´å¤šçš„åŒå­¦é¡ºåˆ©ä¸Šæ‰‹å¹¶å®è·µå“åº”å¼ç¼–ç¨‹ï¼Œå°‘è¸©å‘ã€‚
> 
> 
> ç­‰ç­‰ï¼ŒResso æ˜¯ä»€ä¹ˆï¼ŸResso æ¥æºäº Resonateï¼ˆå…±é¸£ï¼‰ï¼Œæ˜¯å­—èŠ‚è·³åŠ¨æ¨å‡ºçš„ä¸€ä¸ªç¤¾äº¤éŸ³ä¹æµåª’ä½“å¹³å°ï¼Œä¸“ä¸ºä¸‹ä¸€ä»£éŸ³ä¹å‘çƒ§å‹è®¾è®¡ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿé€šè¿‡å¯¹éŸ³ä¹çš„çƒ­çˆ±æ¥è¡¨è¾¾å’Œä¸ä»–äººå»ºç«‹è”ç³»ã€‚
> 

ä¹¦å›æ­£æ–‡ï¼Œæ‰€è°“çš„å“åº”å¼ç¼–ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€™

ç†Ÿæ‚‰ Combine çš„åŒå­¦å¯ä»¥ç›´æ¥è·³åˆ°å®è·µå»ºè®®éƒ¨åˆ†ã€‚

å“åº”å¼ç¼–ç¨‹

ç»´åŸºç™¾ç§‘å¯¹å“åº”å¼ç¼–ç¨‹çš„å®šä¹‰æ˜¯ï¼š

åœ¨è®¡ç®—ä¸­ï¼Œå“åº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§é¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„å£°æ˜å¼ç¼–ç¨‹èŒƒå¼ã€‚

è™½ç„¶å®šä¹‰ä¸­æ¯ä¸ªå­—éƒ½è®¤è¯†ï¼Œä½†è¿èµ·æ¥å´ååˆ†è´¹è§£ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®šä¹‰ä¸­çš„å†…å®¹åˆ†å¼€æ¥ç†è§£ï¼Œé€ä¸ªå‡»ç ´ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸‹å£°æ˜å¼ç¼–ç¨‹ã€‚

### å£°æ˜å¼ç¼–ç¨‹

å£°æ˜å¼å’ŒæŒ‡ä»¤å¼ç¼–ç¨‹æ˜¯å¸¸è§çš„ç¼–ç¨‹èŒƒå¼ã€‚åœ¨æŒ‡ä»¤å¼ç¼–ç¨‹ä¸­ï¼Œå¼€å‘è€…é€šè¿‡ç»„åˆè¿ç®—ã€å¾ªç¯ã€æ¡ä»¶ç­‰è¯­å¥è®©è®¡ç®—æœºæ‰§è¡Œç¨‹åºã€‚å£°æ˜å¼ä¸æŒ‡ä»¤å¼æ­£ç›¸åï¼Œå¦‚æœè¯´æŒ‡ä»¤å¼åƒæ˜¯å‘Šè¯‰è®¡ç®—æœº How to doï¼Œè€Œå£°æ˜å¼åˆ™æ˜¯å‘Šè¯‰è®¡ç®—æœº What to doã€‚å…¶å®å¤§å®¶éƒ½æ¥è§¦è¿‡å£°æ˜å¼ç¼–ç¨‹ï¼Œä½†åœ¨ç¼–ç æ—¶å¹¶ä¸ä¼šæ„è¯†åˆ°ã€‚å„ç±» DSL å’Œå‡½æ•°å¼ç¼–ç¨‹éƒ½å±äºå£°æ˜å¼ç¼–ç¨‹çš„èŒƒç•´ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦è·å–ä¸€ä¸ªæ•´å½¢æ•°ç»„é‡Œçš„æ‰€æœ‰å¥‡æ•°ã€‚æŒ‰ç…§æŒ‡ä»¤å¼çš„é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿‡ç¨‹æ‹†è§£ä¸ºä¸€æ­¥ä¸€æ­¥çš„è¯­å¥ï¼š

1. éå†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚
2. åˆ¤æ–­æ˜¯å¦ä¸ºå¥‡æ•°ã€‚
3. å¦‚æœæ˜¯çš„è¯ï¼ŒåŠ å…¥åˆ°ç»“æœä¸­ã€‚ç»§ç»­éå†ã€‚

```
varÂ resultsÂ =Â [Int]()
forÂ numÂ inÂ valuesÂ {
    ifÂ numÂ %2Â !=Â 0Â {
        results.append(num)
    }
}

```

å¦‚æœæŒ‰å£°æ˜å¼ç¼–ç¨‹æ¥ï¼Œæˆ‘ä»¬çš„æƒ³æ³•å¯èƒ½æ˜¯â€œè¿‡æ»¤å‡ºæ‰€æœ‰å¥‡æ•°â€ï¼Œå¯¹åº”çš„ä»£ç å°±ååˆ†ç›´è§‚ï¼š

```
varÂ resultsÂ =Â values.filterÂ {Â $0Â %Â 2Â !=Â 0Â }

```

å¯è§ä¸Šè¿°ä¸¤ç§ç¼–ç¨‹æ–¹å¼æœ‰ç€æ˜æ˜¾çš„åŒºåˆ«ï¼š

- æŒ‡ä»¤å¼ç¼–ç¨‹ï¼šæè¿°è¿‡ç¨‹ï¼ˆHowï¼‰ï¼Œè®¡ç®—æœºç›´æ¥æ‰§è¡Œå¹¶å¾—ç»“æœã€‚
- å£°æ˜å¼ç¼–ç¨‹ï¼šæè¿°ç»“æœï¼ˆWhatï¼‰ï¼Œè®©è®¡ç®—æœºä¸ºæˆ‘ä»¬ç»„ç»‡å‡ºå…·ä½“è¿‡ç¨‹ï¼Œæœ€åå¾—åˆ°è¢«æè¿°çš„ç»“æœã€‚

### â€œé¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­â€

ç”¨è¯´äººè¯çš„æ–¹å¼è§£é‡Šï¼Œé¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­æ˜¯**å“åº”æœªæ¥å‘ç”Ÿçš„äº‹ä»¶æµã€‚**

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled.png)

1. **äº‹ä»¶å‘å¸ƒï¼š**æŸä¸ªæ“ä½œå‘å¸ƒäº†äº‹ä»¶ `A`ï¼Œäº‹ä»¶ `A` å¯ä»¥æºå¸¦ä¸€ä¸ªå¯é€‰çš„æ•°æ® `B` ã€‚
2. **æ“ä½œå˜å½¢ï¼š**äº‹ä»¶ `A` ä¸æ•°æ® `B` ç»è¿‡ä¸€ä¸ªæˆ–å¤šä¸ªçš„æ“ä½œå‘ç”Ÿäº†å˜åŒ–ï¼Œæœ€ç»ˆå¾—åˆ°äº‹ä»¶ `A'` ä¸æ•°æ® `B'`ã€‚
3. **è®¢é˜…ä½¿ç”¨ï¼š**åœ¨æ¶ˆè´¹ç«¯ï¼Œæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè®¢é˜…è€…æ¥æ¶ˆè´¹å¤„ç†åçš„ `A'` å’Œ`B'`ï¼Œå¹¶è¿›ä¸€æ­¥é©±åŠ¨ç¨‹åºå…¶ä»–éƒ¨åˆ† (å¦‚ UI )

åœ¨è¿™ä¸ªæµç¨‹ä¸­ï¼Œæ— æ•°çš„äº‹ä»¶ç»„æˆäº†äº‹ä»¶æµï¼Œè®¢é˜…è€…ä¸æ–­æ¥å—åˆ°æ–°çš„äº‹ä»¶å¹¶ä½œå‡ºå“åº”ã€‚

è‡³æ­¤ï¼Œæˆ‘ä»¬å¯¹å“åº”å¼ç¼–ç¨‹çš„å®šä¹‰æœ‰äº†åˆæ­¥çš„ç†è§£ï¼Œå³ä»¥**å£°æ˜çš„æ–¹å¼å“åº”æœªæ¥å‘ç”Ÿçš„äº‹ä»¶æµã€‚**åœ¨å®é™…ç¼–ç ä¸­ï¼Œå¾ˆå¤šä¼˜ç§€çš„ä¸‰æ–¹åº“å¯¹è¿™å¥—æœºåˆ¶è¿›ä¸€æ­¥æŠ½è±¡ï¼Œä¸ºå¼€å‘è€…æä¾›äº†åŠŸèƒ½å„å¼‚çš„æ¥å£ã€‚åœ¨ iOS å¼€å‘ä¸­ï¼Œæœ‰ä¸‰ç§ä¸»æµçš„å“åº”å¼â€œæµæ´¾â€œã€‚

### å“åº”å¼æµæ´¾

- ReactiveXï¼šRxSwift
- Reactive Streamsï¼šCombine
- Reactive*ï¼šReactiveCocoa / ReactiveSwift ï¼ReactiveObjc

è¿™ä¸‰ä¸ªæµæ´¾åˆ†åˆ«æ˜¯ ReactiveXã€Reactive Streams å’Œ Reactive**ã€‚*ReactiveX æ¥ä¸‹æ¥ä¼šè¯¦ç»†ä»‹ç»ã€‚Reactive Stream æ—¨åœ¨å®šä¹‰ä¸€å¥—éé˜»å¡å¼å¼‚æ­¥äº‹ä»¶æµå¤„ç†æ ‡å‡†ï¼ŒCombine é€‰æ‹©äº†å®ƒä½œä¸ºå®ç°çš„è§„èŒƒã€‚ä»¥ ReactiveCocoa ä¸ºä»£è¡¨çš„ Reactive* åœ¨ Objective-C æ—¶ä»£æ›¾éå¸¸æµè¡Œï¼Œä½†éšç€ Swift å´›èµ·ï¼Œæ›´å¤šå¼€å‘è€…é€‰æ‹©äº† RxSwift æˆ– Combineï¼Œå¯¼è‡´ Reactive* æ•´ä½“çƒ­åº¦ä¸‹é™ä¸å°‘ã€‚

### **ReactiveX (Reactive Extension)**

ReactiveX æœ€åˆæ˜¯å¾®è½¯åœ¨ .NET ä¸Šå®ç°çš„ä¸€ä¸ªå“åº”å¼çš„æ‹“å±•ã€‚å®ƒçš„æ¥å£å‘½åå¹¶ä¸ç›´è§‚ï¼Œå¦‚ Observable ï¼ˆå¯è§‚æµ‹çš„ï¼‰ å’Œ Observerï¼ˆè§‚æµ‹è€…ï¼‰ã€‚ReactiveX çš„ä¼˜åŠ¿åœ¨äºåˆ›æ–°åœ°èå…¥äº†è®¸å¤šå‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µï¼Œä½¿å¾—æ•´ä¸ªäº‹ä»¶æµçš„å˜å½¢éå¸¸çµæ´»ã€‚è¿™ä¸ªæ˜“ç”¨ä¸”å¼ºå¤§çš„æ¦‚å¿µè¿…é€Ÿè¢«å„ä¸ªè¯­è¨€çš„å¼€å‘è€…é’çï¼Œå› æ­¤ ReactiveX åœ¨å¾ˆå¤šè¯­è¨€éƒ½æœ‰å¯¹åº”ç‰ˆæœ¬çš„å®ç°ï¼ˆå¦‚ RxJSï¼ŒRxJavaï¼ŒRxSwiftï¼‰ï¼Œéƒ½éå¸¸æµè¡Œã€‚Resso çš„ Android å›¢é˜Ÿå°±åœ¨é‡åº¦ä½¿ç”¨ RxJavaã€‚

## ä¸ºä½•é€‰æ‹© Combine

Combine æ˜¯ Apple åœ¨ 2019 å¹´æ¨å‡ºçš„ä¸€ä¸ªç±»ä¼¼ RxSwift çš„å¼‚æ­¥äº‹ä»¶å¤„ç†æ¡†æ¶ã€‚

> é€šè¿‡å¯¹äº‹ä»¶å¤„ç†çš„æ“ä½œè¿›è¡Œç»„åˆ (combine) ï¼Œæ¥å¯¹å¼‚æ­¥äº‹ä»¶è¿›è¡Œè‡ªå®šä¹‰å¤„ç† (è¿™ä¹Ÿæ­£æ˜¯ Combine æ¡†æ¶çš„åå­—çš„ç”±æ¥)ã€‚Combine æä¾›äº†ä¸€ç»„å£°æ˜å¼çš„ Swift APIï¼Œæ¥å¤„ç†éšæ—¶é—´å˜åŒ–çš„å€¼ã€‚è¿™äº›å€¼å¯ä»¥ä»£è¡¨ç”¨æˆ·ç•Œé¢çš„äº‹ä»¶ï¼Œç½‘ç»œçš„å“åº”ï¼Œè®¡åˆ’å¥½çš„äº‹ä»¶ï¼Œæˆ–è€…å¾ˆå¤šå…¶ä»–ç±»å‹çš„å¼‚æ­¥æ•°æ®ã€‚
> 

Resso iOS å›¢é˜Ÿä¹Ÿæ›¾çŸ­æš‚å°è¯•è¿‡ RxSwiftï¼Œä½†åœ¨ä»”ç»†è€ƒå¯Ÿ Combine åï¼Œå‘ç° Combine æ— è®ºæ˜¯åœ¨æ€§èƒ½ã€è°ƒè¯•ä¾¿æ·ç¨‹åº¦ä¸Šéƒ½ä¼˜äº RxSwiftï¼Œæ­¤å¤–è¿˜æœ‰å†…ç½®æ¡†æ¶å’Œ SwiftUI å®˜é…çš„ç‰¹æ®Šä¼˜åŠ¿ï¼Œå—å…¶å¤šæ–¹é¢ä¼˜åŠ¿çš„å¸å¼•ï¼Œæˆ‘ä»¬å…¨é¢åˆ‡æ¢åˆ°äº† Combineã€‚

### Combine çš„ä¼˜åŠ¿

ç›¸è¾ƒäº RxSwiftï¼ŒCombine æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼š

- Apple å‡ºå“
    - å†…ç½®åœ¨ç³»ç»Ÿä¸­ï¼Œå¯¹ App åŒ…ä½“ç§¯æ— å½±å“
- æ€§èƒ½æ›´å¥½
- Debug æ›´ä¾¿æ·
- SwiftUI å®˜é…

### **æ€§èƒ½ä¼˜åŠ¿**

Combine çš„å„é¡¹æ“ä½œç›¸è¾ƒ RxSwift æœ‰ 30% å¤šçš„æ€§èƒ½æå‡ã€‚

Reference: Combine vs. RxSwift Performance Benchmark Test Suite

### **Debug ä¼˜åŠ¿**

ç”±äº Combine æ˜¯ä¸€æ–¹åº“ï¼Œåœ¨ Xcode ä¸­å¼€å¯äº† `Show stack frames without debug symbols and between libraries` é€‰é¡¹åï¼Œæ— æ•ˆçš„å †æ ˆå¯ä»¥å¤§å¹…çš„å‡å°‘ï¼Œæå‡äº† Debug æ•ˆç‡ã€‚

```
//Â åœ¨Â GlobalQueueÂ ä¸­æ¥å—å¹¶ç­”åº”å‡ºæ•°ç»„ä¸­çš„å€¼
[1,Â 2,Â 3,Â 4].publisher
Â Â Â Â .receive(on:Â DispatchQueue.global())
Â Â Â Â .sinkÂ {Â valueÂ in
Â Â Â Â Â Â Â Â print(value)
Â Â Â Â }

```

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled%201.png)

### Combine æ¥å£

ä¸Šæ–‡æåˆ°ï¼ŒCombine çš„æ¥å£æ˜¯åŸºäº Reactive Streams Spec å®ç°çš„ï¼ŒReactive Streams ä¸­å·²ç»å®šä¹‰å¥½äº† `Publisher`ï¼Œ `Subscriber`ï¼Œ`Subscription` ç­‰æ¦‚å¿µï¼ŒApple åœ¨å…¶ä¸Šæœ‰ä¸€äº›å¾®è°ƒã€‚

å…·ä½“åˆ°æ¥å£å±‚é¢ï¼ŒCombine API ä¸ RxSwift API æ¯”è¾ƒç±»ä¼¼ï¼Œæ›´ç²¾ç®€ï¼Œç†Ÿæ‚‰ RxSwift çš„å¼€å‘è€…èƒ½æ— ç¼å¿«é€Ÿä¸Šæ‰‹ Combineã€‚Combine ä¸­ç¼ºæ¼çš„æ¥å£å¯ä»¥é€šè¿‡å…¶ä»–å·²æœ‰æ¥å£ç»„æˆæ›¿ä»£ï¼Œå°‘éƒ¨åˆ†æ“ä½œç¬¦ä¹Ÿæœ‰å¼€æºçš„ç¬¬ä¸‰æ–¹å®ç°ï¼Œå¯¹ç”Ÿäº§ç¯å¢ƒçš„ä½¿ç”¨ä¸ä¼šäº§ç”Ÿå½±å“ã€‚

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled%202.png)

### OpenCombine

ç»†å¿ƒçš„è¯»è€…å¯èƒ½æœ‰å‘ç° **Debug ä¼˜åŠ¿** çš„å›¾ä¸­å‡ºç°äº†ä¸€ä¸ª OpenCombineã€‚Combine ä¸‡èˆ¬å¥½ï¼Œä½†æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼šå®ƒè¦æ±‚çš„æœ€ä½ç³»ç»Ÿç‰ˆæœ¬æ˜¯ iOS 13ï¼Œè®¸å¤šè¦ç»´æŠ¤å…¼å®¹å¤šä¸ªç³»ç»Ÿç‰ˆæœ¬çš„ App å¹¶ä¸èƒ½ä½¿ç”¨ã€‚å¥½åœ¨å¼€æºç¤¾åŒºç»™åŠ›ï¼Œå®ç°äº†ä¸€ä»½ä»…è¦æ±‚ iOS 9.0 çš„ Combine å¼€æºå®ç°ï¼šOpenCombineã€‚ç»å†…éƒ¨æµ‹è¯•ï¼ŒOpenCombine çš„æ€§èƒ½ä¸ Combine æŒå¹³ã€‚OpenCombine ä½¿ç”¨ä¸Šä¸ Combine å·®è·å¾ˆå°ï¼Œæœªæ¥å¦‚æœ App çš„æœ€ä½ç‰ˆæœ¬å‡çº§è‡³ iOS 13 ä¹‹åï¼Œä» OpenCombine è¿ç§»åˆ° Combine çš„æˆæœ¬ä¹Ÿå¾ˆä½ï¼ŒåŸºæœ¬åªæœ‰ç®€å•çš„æ–‡æœ¬æ›¿æ¢å·¥ä½œã€‚å…¬å¸å†… Ressoã€å‰ªæ˜ ã€é†’å›¾ã€Lark éƒ½æœ‰ä½¿ç”¨ OpenCombineã€‚

## Combine åŸºç¡€æ¦‚å¿µ

ä¸Šæ–‡æåˆ°ï¼ŒCombine çš„æ¦‚å¿µåŸºäº Reactive Streamsã€‚å“åº”å¼ç¼–ç¨‹ä¸­çš„ä¸‰ä¸ªå…³é”®æ¦‚å¿µï¼Œäº‹ä»¶å‘å¸ƒï¼æ“ä½œå˜å½¢ï¼è®¢é˜…ä½¿ç”¨ï¼Œåˆ†åˆ«å¯¹åº”åˆ° Combine ä¸­çš„ `Publisher`, `Operator` ä¸ `Subscriber`ã€‚

åœ¨ç®€åŒ–çš„æ¨¡å‹ä¸­ï¼Œé¦–å…ˆæœ‰ä¸€ä¸ª `Publisher`ï¼Œç»è¿‡ `Operater` å˜æ¢åè¢« `Subscriber`æ¶ˆè´¹ã€‚è€Œåœ¨å®é™…ç¼–ç ä¸­ï¼Œ `Operator` çš„æ¥æºå¯èƒ½æ˜¯å¤æ•°ä¸ª `Publisher`ï¼Œ`Operator` ä¹Ÿå¯èƒ½ä¼šè¢«å¤šä¸ª `Publisher` è®¢é˜…ï¼Œé€šå¸¸ä¼šå½¢æˆä¸€ä¸ªéå¸¸å¤æ‚çš„å›¾ã€‚

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled%203.png)

### Publisher

```
Publisher<Output,Â Failure:Â Error>

```

`Publisher` æ˜¯**äº‹ä»¶**äº§ç”Ÿçš„æºå¤´ã€‚äº‹ä»¶æ˜¯ Combine ä¸­éå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå¯ä»¥åˆ†æˆä¸¤ç±»ï¼Œä¸€ç±»æºå¸¦äº†å€¼ï¼ˆ`Value`ï¼‰ï¼Œå¦å¤–ä¸€ç±»æ ‡å¿—äº†ç»“æŸï¼ˆ`Completion`ï¼‰ã€‚ç»“æŸçš„å¯ä»¥æ˜¯æ­£å¸¸å®Œæˆï¼ˆ`Finished`ï¼‰æˆ–å¤±è´¥ï¼ˆ`Failure`ï¼‰ã€‚

```
Eventsï¼š
- Valueï¼šOutput
-Â Completion
Â Â Â Â -Â Finished
Â Â Â Â -Â Failure(Error)

```

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled%204.png)

é€šå¸¸æƒ…å†µä¸‹ï¼Œ ä¸€ä¸ª `Publisher` å¯ä»¥ç”Ÿæˆ `N` ä¸ªäº‹ä»¶åç»“æŸã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ª `Publisher`ä¸€æ—¦å‘å‡ºäº†`Completion`ï¼ˆå¯ä»¥æ˜¯æ­£å¸¸å®Œæˆæˆ–å¤±è´¥ï¼‰ï¼Œæ•´ä¸ªè®¢é˜…å°†ç»“æŸï¼Œä¹‹åå°±ä¸èƒ½å‘å‡ºä»»ä½•äº‹ä»¶äº†ã€‚

Apple ä¸ºå®˜æ–¹åŸºç¡€åº“ä¸­çš„å¾ˆå¤šå¸¸ç”¨ç±»æä¾›äº† Combine æ‹“å±• Publisherï¼Œå¦‚ Timer, NotificationCenter, Array, URLSession, KVO ç­‰ã€‚åˆ©ç”¨è¿™äº›æ‹“å±•æˆ‘ä»¬å¯ä»¥å¿«é€Ÿç»„åˆå‡ºä¸€ä¸ª Publisherï¼Œå¦‚ï¼š

```
//Â `cancellable`Â æ˜¯ç”¨äºå–æ¶ˆè®¢é˜…çš„Â tokenï¼Œä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»
cancellableÂ =Â URLSession.shared
Â Â Â Â //Â ç”Ÿæˆä¸€ä¸ªÂ https://example.comÂ è¯·æ±‚çš„Â Publisher
Â Â Â Â .dataTaskPublisher(for:Â URL(string:Â "https://example.com")!)
Â Â Â Â //Â å°†è¯·æ±‚ç»“æœä¸­çš„Â DataÂ è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶å¿½ç•¥æ‰ç©ºç»“æœï¼Œä¸‹é¢ä¼šè¯¦ç»†ä»‹ç»Â compactMap
Â Â Â Â .compactMapÂ {
Â Â Â Â Â Â Â Â String(data:Â $0.data,Â encoding:Â .utf8)
Â Â Â Â }
Â Â Â Â //Â åœ¨ä¸»çº¿ç¨‹æ¥å—åç»­çš„äº‹ä»¶Â ï¼ˆä¸Šé¢çš„Â compactMapÂ å‘ç”Ÿåœ¨Â URLSessionÂ çš„çº¿ç¨‹ä¸­ï¼‰
Â Â Â Â .receive(on:Â RunLoop.main)
Â Â Â Â //Â å¯¹æœ€ç»ˆçš„ç»“æœï¼ˆè¯·æ±‚ç»“æœå¯¹åº”çš„å­—ç¬¦ä¸²ï¼‰è¿›è¡Œæ¶ˆè´¹
Â Â Â Â .sinkÂ {Â _Â in
Â Â Â Â Â Â Â Â //
Â Â Â Â }Â receiveValue:Â {Â resultStringÂ in
Â Â Â Â Â Â Â Â self.textView.textÂ =Â resultString
Â Â Â Â }

```

æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„ `Publisher` ä¹Ÿååˆ†æœ‰ç”¨ï¼š

- `Future`ï¼šåªä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥ï¼Œé€‚ç”¨äºå¤§éƒ¨åˆ†ç®€å•å›è°ƒåœºæ™¯
- `Just`ï¼šå¯¹å€¼çš„ç®€å•å°è£…ï¼Œå¦‚ `Just(1)`
- `@Published`ï¼šä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç» åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¿™äº›ç‰¹æ®Šçš„ `Publisher` ä»¥åŠä¸‹æ–‡ä»‹ç»çš„ `Subject` å¯ä»¥çµæ´»ç»„åˆå‡ºæ»¡è¶³éœ€è¦çš„äº‹ä»¶æºã€‚æå°‘çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å®ç°è‡ªå®šä¹‰çš„ Publisher ï¼Œå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ã€‚

### Subscriber

```
Subscriber<Input,Â Failure:Â Error>

```

`Subsriber` ä½œä¸ºäº‹ä»¶çš„è®¢é˜…ç«¯ï¼Œå®ƒçš„å®šä¹‰ä¸ `Publisher` å¯¹åº”ï¼Œ`Publisher` ä¸­çš„ `Output`å¯¹åº”`Subscriber` çš„ `Input`ã€‚å¸¸ç”¨çš„ `Subscriber` æœ‰ `Sink` å’Œ `Assign`ã€‚

`Sink` ç›´æ¥å¯¹äº‹ä»¶æµè¿›è¡Œè®¢é˜…ä½¿ç”¨ï¼Œå¯ä»¥å¯¹ `Value` å’Œ `completion` åˆ†åˆ«è¿›è¡Œå¤„ç†ã€‚

> Sink è¿™ä¸ªå•è¯åœ¨åˆæ¬¡çœ‹åˆ°ä¼šä»¤äººéå¸¸è´¹è§£ã€‚è¿™ä¸ªæœ¯è¯­å¯æ¥æºäºç½‘ç»œæµä¸­çš„æ±‡ç‚¹ï¼ˆSinkï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç†è§£ä¸º The stream goes down the sinkã€‚
> 

```
//Â ä»æ•°ç»„ç”Ÿæˆä¸€ä¸ªÂ Publisher
cancellableÂ =Â [1,Â 2,Â 3,Â 4,Â 5].publisher
Â Â Â Â .sinkÂ {Â completionÂ in
Â Â Â Â Â Â Â Â //Â å¤„ç†äº‹ä»¶æµç»“æŸ
Â Â Â Â }Â receiveValue:Â {Â valueÂ in
Â Â Â Â Â Â Â Â //Â æ‰“å°ä¼šæ¯ä¸ªå€¼ï¼Œä¼šä¾æ¬¡æ‰“å°å‡ºÂ 1,Â 2,Â 3,Â 4,Â 5
Â Â Â Â Â Â Â Â print(value)
Â Â Â Â }

```

`Assign` æ˜¯ä¸€ä¸ªç‰¹åŒ–ç‰ˆçš„ `Sink` ï¼Œæ”¯æŒé€šè¿‡ `KeyPath` ç›´æ¥è¿›è¡Œèµ‹å€¼ã€‚

```
letÂ textLabelÂ =Â UILabel()
cancellableÂ =Â [1,Â 2,Â 3].publisher
Â Â Â Â //Â å°†Â æ•°å­—Â è½¬æ¢ä¸ºÂ å­—ç¬¦ä¸²ï¼Œå¹¶å¿½ç•¥æ‰Â nilÂ ï¼Œä¸‹é¢ä¼šè¯¦ç»†ä»‹ç»è¿™ä¸ªÂ Operator
Â Â Â Â .compactMapÂ {Â String($0)Â }
Â Â Â Â .assign(to:Â \.text,Â on:Â textLabel)

```

éœ€è¦ç•™æ„çš„æ˜¯ï¼Œå¦‚æœç”¨ `assign` å¯¹ `self` è¿›è¡Œèµ‹å€¼ï¼Œå¯èƒ½ä¼šå½¢æˆéšå¼çš„å¾ªç¯å¼•ç”¨ï¼Œè¿™ç§æƒ…å†µéœ€è¦æ”¹ç”¨ `sink` ä¸ `weak self` æ‰‹åŠ¨è¿›è¡Œèµ‹å€¼ã€‚

### **Cancellable & AnyCancellable**

ç»†å¿ƒçš„è¯»è€…å¯èƒ½å‘ç°äº†ä¸Šé¢å‡ºç°äº†ä¸€ä¸ª `cancellable`ã€‚æ¯ä¸€ä¸ªè®¢é˜…éƒ½ä¼šç”Ÿæˆä¸€ä¸ª `AnyCancellable` å¯¹è±¡ï¼Œç”¨äºæ§åˆ¶è®¢é˜…çš„ç”Ÿå‘½å‘¨æœŸã€‚é€šè¿‡è¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å–æ¶ˆè®¢é˜…ã€‚å½“è¿™ä¸ªå¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œè®¢é˜…ä¹Ÿä¼šè¢«å–æ¶ˆã€‚

```
//Â å–æ¶ˆè®¢é˜…
cancellable.cancel()

```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸€ä¸ªè®¢é˜…æˆ‘ä»¬éƒ½éœ€è¦æŒæœ‰è¿™ä¸ª `cancellable`ï¼Œå¦åˆ™æ•´ä¸ªè®¢é˜…ä¼šç«‹å³è¢«å–æ¶ˆå¹¶ç»“æŸæ‰ã€‚

### Subscription

`Publisher` å’Œ `Subscriber` ä¹‹é—´æ˜¯é€šè¿‡ `Subscription` å»ºç«‹è¿æ¥ã€‚ç†è§£æ•´ä¸ªè®¢é˜…è¿‡ç¨‹å¯¹åç»­æ·±å…¥ä½¿ç”¨ Combine éå¸¸æœ‰å¸®åŠ©ã€‚

å›¾ç‰‡æ¥è‡ªã€ŠSwiftUI å’Œ Combine ç¼–ç¨‹ã€‹

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled%205.png)

Combine çš„è®¢é˜…è¿‡ç¨‹å…¶å®æ˜¯ä¸€ä¸ªæ‹‰å–æ¨¡å‹ã€‚

1. `Subscriber` å‘èµ·ä¸€ä¸ªè®¢é˜…ï¼Œå‘Šè¯‰ `Publisher` æˆ‘éœ€è¦ä¸€ä¸ªè®¢é˜…ã€‚
2. `Publisher` è¿”å›ä¸€ä¸ªè®¢é˜…å®ä½“ï¼ˆ`Subscription`ï¼‰ã€‚
3. `Subscriber` é€šè¿‡è¿™ä¸ª `Subscription` å»è¯·æ±‚å›ºå®šæ•°é‡ï¼ˆ`Demand`ï¼‰çš„æ•°æ®ã€‚
4. `Publisher` æ ¹æ® `Demand` è¿”å›äº‹ä»¶ã€‚å•æ¬¡çš„ `Demand` å‘å¸ƒå®Œæˆåï¼Œå¦‚æœ `Subscriber`ç»§ç»­è¯·æ±‚äº‹ä»¶ï¼Œ`Publisher` ä¼šç»§ç»­å‘å¸ƒã€‚
5. ç»§ç»­å‘å¸ƒæµç¨‹ã€‚
6. å½“ `Subscriber` è¯·æ±‚çš„äº‹ä»¶å…¨éƒ¨å‘å¸ƒå®Œæˆåï¼Œ`Publisher` ä¼šå‘é€ä¸€ä¸ª `Completion`ã€‚

### Subject

```
Subject<Output,Â Failure:Â Error>

```

`Subject` æ˜¯ä¸€ç±»ç‰¹æ®Šçš„ `Publisher`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ–¹æ³•è°ƒç”¨ï¼ˆå¦‚ `send()`ï¼‰æ‰‹åŠ¨å‘äº‹ä»¶æµä¸­æ³¨å…¥æ–°çš„äº‹ä»¶ã€‚

```
privateÂ letÂ isPlayingPodcastSubjectÂ =Â CurrentValueSubject<Bool,Â Never>(false)
//Â å‘Â isPlayingPodcastPublisherÂ æ³¨å…¥ä¸€ä¸ªæ–°çš„äº‹ä»¶ï¼Œå®ƒçš„å€¼æ˜¯Â true
isPlayingPodcastSubject.send(true)

```

Combine æä¾›äº†ä¸¤ä¸ªå¸¸ç”¨çš„ `Subject`ï¼š`PassthroughSubject` ä¸ `CurrentValueSubject`ã€‚

- `PassthroughSubject`ï¼šé€ä¼ äº‹ä»¶ï¼Œä¸ä¼šæŒæœ‰æœ€æ–°çš„ `Output`
- `CurrentValueSubject`ï¼šé™¤äº†ä¼ é€’äº‹ä»¶ä¹‹å¤–ï¼Œä¼šæŒæœ‰æœ€æ–°çš„ `Output`

### **@Published**

å¯¹äºåˆšæ¥è§¦ Combine çš„åŒå­¦æ¥è¯´ï¼Œæœ€å›°æ‰°çš„é—®é¢˜è«è¿‡äºéš¾ä»¥æ‰¾åˆ°å¯ä»¥ç›´æ¥ä½¿ç”¨çš„äº‹ä»¶æºã€‚Combine æä¾›äº†ä¸€ä¸ª Property Wrapper `@Pubilshed` å¯ä»¥å¿«é€Ÿå°è£…ä¸€ä¸ªå˜é‡å¾—åˆ°ä¸€ä¸ª `Publisher`ã€‚

```
//Â å£°æ˜å˜é‡
classÂ AlarmÂ {
Â Â Â Â @Published
Â Â Â Â publicÂ varÂ countDownÂ =Â 0
}

letÂ alarmÂ =Â Alarm()

//Â è®¢é˜…å˜åŒ–
letÂ cancellableÂ =Â alarm.$countDownÂ //Â Published<Int>.Publisher
Â Â Â Â .sinkÂ {Â print($0)Â }

//Â ä¿®æ”¹Â countDownï¼Œä¸Šé¢Â sinkÂ çš„é—­åŒ…ä¼šè§¦å‘
alarm.countDownÂ +=Â 1

```

ä¸Šé¢æ¯”è¾ƒæœ‰è¶£çš„æ˜¯ `$countDown` è®¿é—®åˆ°çš„ä¸€ä¸ª `Publisher`ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œ`$` è®¿é—®åˆ°å…¶å®æ˜¯ `countDown` çš„ `projectedValue`ï¼Œæ­£æ˜¯å¯¹åº”çš„ `Publisher`ã€‚

```
@propertyWrapperÂ publicÂ structÂ Published<Value>Â {
Â Â Â Â //Â ...
Â Â Â Â ///Â TheÂ propertyÂ forÂ whichÂ thisÂ instanceÂ exposesÂ aÂ publisher
Â Â Â Â ///
Â Â Â Â ///Â TheÂ ``Published/projectedValue`Â isÂ theÂ propertyÂ accessedÂ withÂ theÂ `$`Â operator
Â Â Â Â publicÂ varÂ projectedValue:Â Published<Value>.PublisherÂ {Â mutatingÂ getÂ setÂ }
}

```

`@Published` éå¸¸é€‚åˆåœ¨æ¨¡å—å†…å¯¹äº‹ä»¶è¿›è¡Œå°è£…ï¼Œç±»å‹æ“¦é™¤åæä¾›å¤–éƒ¨è¿›è¡Œè®¢é˜…æ¶ˆè´¹ã€‚

å®é™…å®è·µä¸­ï¼Œå¯¹äºå·²æœ‰çš„ä»£ç é€»è¾‘ï¼Œä½¿ç”¨ `@Published` å¯ä»¥åœ¨ä¸æ”¹åŠ¨å…¶ä»–ä»£ç å¿«é€Ÿè®©å±æ€§å¾—åˆ° Publisher çš„èƒ½åŠ›ã€‚è€Œæ–°ç¼–å†™çš„ä»£ç ï¼Œå¦‚æœä¸ä¼šå‘ç”Ÿé”™è¯¯ä¸”éœ€è¦ä½¿ç”¨åˆ°å½“å‰çš„ Valueï¼Œ`@Published` ä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ï¼Œé™¤æ­¤ä¹‹å¤–åˆ™éœ€è¦æŒ‰éœ€è€ƒè™‘ä½¿ç”¨ `PassthroughSubject` æˆ– `CurrentValueSubject`ã€‚

### Operator

ç°å®ç¼–ç ä¸­ï¼Œ`Publisher` æºå¸¦çš„æ•°æ®ç±»å‹å¯èƒ½å¹¶ä¸æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨ `Operator` å¯¹æ•°æ®è¿›è¡Œå˜æ¢ã€‚Combine è‡ªå¸¦äº†éå¸¸ä¸°å¯Œçš„ Operatorï¼Œæ¥ä¸‹æ¥ä¼šé’ˆå¯¹å…¶ä¸­å¸¸ç”¨çš„å‡ ä¸ªè¿›è¡Œä»‹ç»ã€‚

### **map, filter, reduce**

ç†Ÿæ‚‰å‡½æ•°å¼ç¼–ç¨‹çš„åŒå­¦å¯¹è¿™å‡ ä¸ª Operator åº”è¯¥éå¸¸ç†Ÿæ‚‰ã€‚å®ƒä»¬çš„ä½œç”¨ä¸åœ¨æ•°ç»„ä¸Šçš„æ•ˆæœéå¸¸ç›¸ä¼¼ï¼Œåªä¸è¿‡è¿™æ¬¡æ˜¯åœ¨å¼‚æ­¥çš„äº‹ä»¶æµä¸­ã€‚

ä¾‹å¦‚ï¼Œå¯¹äº `map` æ¥è¯´ï¼Œä»–ä¼šå¯¹æ¯ä¸ªäº‹ä»¶ä¸­çš„å€¼è¿›è¡Œå˜æ¢ï¼š

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled%206.png)

```

[1,Â 2,Â 3].publisher
Â Â Â Â .mapÂ {Â $0Â *Â 10Â }
Â Â Â Â .sinkÂ {Â valueÂ in
Â Â Â Â Â Â Â Â //Â å°†ä¼šç­”åº”å‡ºÂ 10,Â 20,Â 30
Â Â Â Â Â Â Â Â print(value)
Â Â Â Â }

```

`filter` ä¹Ÿç±»ä¼¼ï¼Œä¼šå¯¹æ¯ä¸ªäº‹ä»¶ç”¨é—­åŒ…é‡Œçš„æ¡ä»¶è¿›è¡Œè¿‡æ»¤ã€‚`reduce` åˆ™ä¼šå¯¹æ¯ä¸ªäº‹ä»¶çš„å€¼è¿›è¡Œè®¡ç®—ï¼Œæœ€åå°†è®¡ç®—ç»“æœä¼ é€’ç»™ä¸‹æ¸¸ã€‚

### **compactMap**

å¯¹äº Value æ˜¯ `Optional` çš„äº‹ä»¶æµï¼Œå¯ä»¥ä½¿ç”¨ `compactMap` å¾—åˆ°ä¸€ä¸ª Value ä¸ºéç©ºç±»å‹çš„ Publisherã€‚

```
//Â Publiser<Int?,Â Never>Â ->Â Publisher<Int,Â Never>
cancellableÂ =Â [1,Â nil,Â 2,Â 3].publisher
Â Â Â Â Â Â Â Â .compactMapÂ {Â $0Â }
Â Â Â Â Â Â Â Â .mapÂ {Â $0Â *Â 10Â }
Â Â Â Â Â Â Â Â .sinkÂ {Â print($0)Â }

```

### **flatMap**

`flatMap` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ“ä½œç¬¦ï¼Œå®ƒå°†æ¯ä¸€ä¸ªçš„äº‹ä»¶è½¬æ¢ä¸ºä¸€ä¸ªäº‹ä»¶æµå¹¶åˆå¹¶åœ¨ä¸€èµ·ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå½“ç”¨æˆ·åœ¨æœç´¢æ¡†è¾“å…¥æ–‡æœ¬æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¢é˜…æ–‡æœ¬çš„å˜åŒ–ï¼Œå¹¶é’ˆå¯¹æ¯ä¸€ä¸ªæ–‡æœ¬ç”Ÿæˆå¯¹åº”çš„æœç´¢è¯·æ±‚ Publisherï¼Œå¹¶å°†æ‰€æœ‰ Publisher çš„äº‹ä»¶æ±‡èšåœ¨ä¸€èµ·è¿›è¡Œæ¶ˆè´¹ã€‚

å…¶ä»–å¸¸è§çš„ Operator è¿˜æœ‰ `zip`, `combineLatest` ç­‰ã€‚

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled%207.png)

## å®è·µå»ºè®®

### ç±»å‹æ“¦é™¤

Combine ä¸­çš„ `Publisher` åœ¨ç»è¿‡å„ç§ `Operator` å˜æ¢ä¹‹åä¼šå¾—åˆ°ä¸€ä¸ªå¤šå±‚æ³›å‹åµŒå¥—ç±»å‹ï¼š

```
URLSession.shared.dataTaskPublisher(for:Â URL(string:Â "https://resso.com")!)
Â Â Â Â .mapÂ {Â $0.dataÂ }
Â Â Â Â .decode(type:Â String.self,Â decoder:Â JSONDecoder())
//Â è¿™ä¸ªÂ publisherÂ çš„ç±»å‹æ˜¯Â Publishers.Decode<Publishers.Map<URLSession.DataTaskPublisher,Â JSONDecoder.Â Input>,Â String,Â JSONDecoder>

```

å¦‚æœåœ¨ `Publisher` åˆ›å»ºå˜å½¢å®Œæˆåç«‹å³è®¢é˜…æ¶ˆè´¹ï¼Œè¿™å¹¶ä¸ä¼šå¸¦æ¥ä»»ä½•é—®é¢˜ã€‚ä½†ä¸€æ—¦æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ª `Publisher` æä¾›ç»™å¤–éƒ¨ä½¿ç”¨æ—¶ï¼Œå¤æ‚çš„ç±»å‹ä¼šæš´éœ²è¿‡å¤šå†…éƒ¨å®ç°ç»†èŠ‚ï¼ŒåŒæ—¶ä¹Ÿä¼šè®©å‡½æ•°ï¼å˜é‡çš„å®šä¹‰éå¸¸è‡ƒè‚¿ã€‚Combine æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ“ä½œç¬¦ `erasedToAnyPublisher`ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ“¦é™¤æ‰å…·ä½“ç±»å‹ï¼š

```
//Â ç”Ÿæˆä¸€ä¸ªç±»å‹æ“¦é™¤åçš„è¯·æ±‚ã€‚å‡½æ•°çš„è¿”å›å€¼æ›´ç®€æ´
funcÂ requestRessoAPI()Â ->Â AnyPublisher<String,Â Error>Â {
Â Â Â Â letÂ requestÂ =Â URLSession.shared.dataTaskPublisher(for:Â URL(string:Â "https://resso.com")!)
Â Â Â Â Â Â Â Â .mapÂ {Â $0.dataÂ }
Â Â Â Â Â Â Â Â .decode(type:Â String.self,Â decoder:Â JSONDecoder())
Â Â Â Â //Â Publishers.Decode<Publishers.Map<URLSession.DataTaskPublisher,Â JSONDecoder.Â Input>,Â String,Â JSONDecoder>
Â Â Â Â //Â to
Â Â Â Â //Â AnyPublisher<String,Â Error>
Â Â Â Â returnÂ request.eraseToAnyPublisher()
}

//Â åœ¨æ¨¡å—å¤–ï¼Œä¸ç”¨å…³å¿ƒÂ `requestRessoAPI()`Â è¿”å›çš„å…·ä½“ç±»å‹ï¼Œç›´æ¥è¿›è¡Œæ¶ˆè´¹
cancellableÂ =Â requestRessoAPI().sinkÂ {Â _Â in

}Â receiveValue:Â {
Â Â Â Â print($0)
}

```

é€šè¿‡ç±»å‹æ“¦é™¤ï¼Œæœ€ç»ˆæš´éœ²ç»™å¤–éƒ¨çš„æ˜¯ä¸€ä¸ªç®€å•çš„ `AnyPublisher<String, Error>`ã€‚

### Debugging

å“åº”å¼ç¼–ç¨‹å†™èµ·æ¥éå¸¸çš„è¡Œäº‘æµæ°´ï¼Œä½† Debug èµ·æ¥å°±ç›¸å¯¹æ²¡æœ‰é‚£ä¹ˆæ„‰å¿«äº†ã€‚å¯¹æ­¤ï¼ŒCombine ä¹Ÿæä¾›äº†å‡ ä¸ª Operator å¸®åŠ©å¼€å‘è€… Debugã€‚

### **Debug Operator**

`print` å’Œ `handleEvents`

`print` å¯ä»¥æ‰“å°å‡ºæ•´ä¸ªè®¢é˜…è¿‡ç¨‹ä»å¼€å§‹åˆ°ç»“æŸçš„ Subscription å˜åŒ–ä¸æ‰€æœ‰å€¼ï¼Œä¾‹å¦‚ï¼š

```
cancellableÂ =Â [1,Â 2,Â 3].publisher
Â Â .receive(on:Â DispatchQueue.global())
Â Â //Â ä½¿ç”¨Â `ArrayÂ Publisher`Â ä½œä¸ºæ‰€æœ‰æ‰“å°å†…å®¹çš„å‰ç¼€
Â Â .printÂ (Â "ArrayÂ Publisher")
Â Â .sinkÂ {Â _Â inÂ }

```

å¯ä»¥å¾—åˆ°ï¼š

```
ArrayÂ Publisher:Â receiveÂ subscription:Â (ReceiveOn)
ArrayÂ Publisher:Â requestÂ unlimited
ArrayÂ Publisher:Â receiveÂ cancel
ArrayÂ Publisher:Â receiveÂ value:Â (1)
ArrayÂ Publisher:Â receiveÂ value:Â (2)
ArrayÂ Publisher:Â receiveÂ value:Â (3)
ArrayÂ Publisher:Â receiveÂ finished

```

åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªå¯¹æ‰€æœ‰å˜åŒ–ä¸­çš„éƒ¨åˆ†äº‹ä»¶æ„Ÿå…´è¶£ï¼Œè¿™æ—¶å€™å¯ä»¥ç”¨ `handleEvents` å¯¹éƒ¨åˆ†äº‹ä»¶è¿›è¡Œæ‰“å°ã€‚ç±»ä¼¼çš„è¿˜æœ‰ `breakpoint`ï¼Œå¯ä»¥åœ¨äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘æ–­ç‚¹ã€‚

### **ç”»å›¾æ³•**

åˆ°äº†ä¸‡ç­–å°½çš„åœ°æ­¥ï¼Œç”¨å›¾åƒç†æ¸…æ€è·¯ä¹Ÿæ˜¯å¾ˆå¥½çš„æ–¹æ³•ã€‚å¯¹äºå•ä¸ª Operatorï¼Œå¯ä»¥åœ¨ RxMarble æ‰¾åˆ°å¯¹åº” Operator ç¡®è®¤ç†è§£æ˜¯å¦æ­£ç¡®ã€‚å¯¹äºå¤æ‚çš„è®¢é˜…ï¼Œå¯ä»¥ç”»å›¾ç¡®è®¤äº‹ä»¶æµçš„ä¼ é€’æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚

```
letÂ greetingsÂ =Â PassthroughSubject<String,Â Never>()
letÂ namesÂ =Â PassthroughSubject<String,Â Never>()
letÂ yearsÂ =Â PassthroughSubject<Int,Â Never>()
//Â CombineLatestÂ ä¼šé€‰ç”¨ä¸¤ä¸ªäº‹ä»¶æµä¸­æœ€æ–°çš„å€¼ç”Ÿæˆæ–°çš„äº‹ä»¶æµ
letÂ greetingNamesÂ =Â Publishers.CombineLatest(greetings,Â names)
Â Â Â Â Â Â Â Â .mapÂ {"\($1)Â \($0)"Â }
letÂ wholeSentenceÂ =Â Publishers.CombineLatest(greetingNames,Â years)
Â Â Â Â Â Â Â Â .mapÂ {Â ")($0),Â \($1)"Â }
Â Â Â Â Â Â Â Â .sinkÂ {Â print($0)Â }

greetings.send("Hello")
names.send("Combine")
years.send(2022)

```

![Untitled](%E4%BB%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%88%B0%20Combine%20%E5%AE%9E%E8%B7%B5%20a9da2f77bb8846628439669dacca2e70/Untitled%208.png)

### å¸¸è§é”™è¯¯

### **ç«‹å³å¼€å§‹çš„ Just å’Œ Future**

å¯¹äºå¤§éƒ¨åˆ†çš„ `Publisher`æ¥è¯´ï¼Œå®ƒä»¬åœ¨è®¢é˜…åæ‰ä¼šå¼€å§‹ç”Ÿäº§äº‹ä»¶ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ä¾‹å¤–ã€‚`Just` å’Œ `Future` åœ¨åˆå§‹åŒ–å®Œæˆåä¼šç«‹å³æ‰§è¡Œé—­åŒ…ç”Ÿäº§äº‹ä»¶ï¼Œè¿™å¯èƒ½ä¼šè®©ä¸€äº›è€—æ—¶é•¿çš„æ“ä½œåœ¨ä¸ç¬¦åˆé¢„æœŸçš„æ—¶æœºæå‰å¼€å§‹ï¼Œä¹Ÿå¯èƒ½ä¼šè®©ç¬¬ä¸€ä¸ªè®¢é˜…é”™è¿‡ä¸€äº›å¤ªæ—©å¼€å§‹çš„äº‹ä»¶ã€‚

```
funcÂ makeMyPublisherÂ ()Â ->Â AnyPublisher<Int,Â Never>Â {
Â Â Â Â Just(calculateTimeConsumingResult())
Â Â Â Â Â Â Â Â .eraseToAnyPublisher()
}

```

ä¸€ä¸ªå¯è¡Œçš„è§£æ³•æ˜¯åœ¨è¿™ç±» `Publisher` å¤–å°è£…ä¸€å±‚ `Defferred`ï¼Œè®©å®ƒåœ¨æ¥æ”¶åˆ°è®¢é˜…ä¹‹åå†å¼€å§‹æ‰§è¡Œå†…éƒ¨çš„é—­åŒ…ã€‚

```
funcÂ makeMyFuture2(Â )Â ->Â AnyPublisher<Int,Â Never>Â {
Â Â Â Â DeferredÂ {
Â Â Â Â Â Â Â Â returnÂ Just(calculateTimeConsumingResult())
Â Â Â Â }.eraseToAnyPublisher()
}

```

### **å‘ç”Ÿé”™è¯¯å¯¼è‡´ Subscription æ„å¤–ç»“æŸ**

```
funcÂ requestingAPI()Â ->Â AnyPublisher<String,Â Error>Â {
Â Â Â Â returnÂ URLSession.shared
Â Â Â Â Â Â Â Â .dataTaskPublisher(for:Â URL(string:Â "https://resso.com")!)
Â Â Â Â Â Â Â Â .mapÂ {Â $0.dataÂ }
Â Â Â Â Â Â Â Â .decode(type:Â String.self,Â decoder:Â JSONDecoder())
Â Â Â Â Â Â Â Â .eraseToAnyPublisher()
}

cancellableÂ =Â NotificationCenter.default
Â Â Â Â .publisher(for:Â UserCenter.userStateChanged)
Â Â Â Â .flatMap({Â _Â in
Â Â Â Â Â Â Â Â returnÂ requestingAPI()
Â Â Â Â })
Â Â Â Â .sinkÂ {Â completionÂ in

Â Â Â Â }Â receiveValue:Â {Â valueÂ in
Â Â Â Â Â Â Â Â textLabel.textÂ =Â value
Â Â Â Â }

```

ä¸Šé¢çš„ä»£ç ä¸­å°†ç”¨æˆ·çŠ¶æ€çš„é€šçŸ¥è½¬åŒ–æˆäº†ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚ç»“æœæ›´æ–°åˆ°ä¸€ä¸ª Label ä¸Šã€‚éœ€è¦ç•™æ„çš„æ˜¯ï¼Œä¸€æ—¦æŸæ¬¡ç½‘ç»œè¯·æ±‚å‘ç”Ÿé”™è¯¯ï¼Œæ•´ä¸ªè®¢é˜…ä¼šè¢«ç»“æŸæ‰ï¼Œåç»­æ–°çš„é€šçŸ¥å¹¶ä¸ä¼šè¢«è½¬åŒ–ä¸ºè¯·æ±‚ã€‚

```
cancellableÂ =Â NotificationCenter.default
Â Â Â Â .publisher(for:Â UserCenter.userStateChanged)
Â Â Â Â .flatMapÂ {Â valueÂ in
Â Â Â Â Â Â Â Â returnÂ requestingAPI().materialize()
Â Â Â Â }
Â Â Â Â .sinkÂ {Â textÂ in
Â Â Â Â Â Â Â Â titleLabel.textÂ =Â text
Â Â Â Â }

```

è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä¸Šé¢ä½¿ç”¨ `materialize` å°†äº‹ä»¶ä» `Publisher<Output, MyError>` è½¬æ¢ä¸º `Publisher<Event<Output, MyError>, Never>` ä»è€Œé¿å…äº†é”™è¯¯å‘ç”Ÿã€‚

Combine å®˜æ–¹å¹¶æ²¡æœ‰å®ç° materialize ï¼ŒCombineExt æä¾›äº†å¼€æºçš„å®ç°ã€‚

### Combine In Resso

Resso åœ¨å¾ˆå¤šåœºæ™¯ä½¿ç”¨åˆ°äº† Combineï¼Œå…¶ä¸­æœ€ç»å…¸çš„ä¾‹å­è«è¿‡äºéŸ³æ•ˆåŠŸèƒ½ä¸­å¤šä¸ªå±æ€§çš„è·å–é€»è¾‘ã€‚éŸ³æ•ˆéœ€è¦ä½¿ç”¨ä¸“è¾‘å°é¢ï¼Œä¸“è¾‘ä¸»é¢˜è‰²ä»¥åŠæ­Œæ›²å¯¹åº”çš„ç‰¹æ•ˆé…ç½®æ¥é©±åŠ¨éŸ³æ•ˆæ’­æ”¾ã€‚è¿™ä¸‰ä¸ªå±æ€§åˆ†åˆ«éœ€è¦ä½¿ç”¨ä¸‰ä¸ªç½‘ç»œè¯·æ±‚æ¥è·å–ï¼Œå¦‚æœä½¿ç”¨ iOS ä¸­ç»å…¸çš„é—­åŒ…å›è°ƒæ¥ç¼–å†™è¿™éƒ¨åˆ†é€»è¾‘ï¼Œé‚£åµŒå¥—ä¸‰ä¸ªé—­åŒ…ï¼Œé™·å…¥å›è°ƒåœ°ç‹±ï¼Œæ›´åˆ«æå…¶ä¸­çš„é”™è¯¯åˆ†æ”¯å¾ˆæœ‰å¯èƒ½é—æ¼ã€‚

```
funcÂ startEffectNormal()Â {
Â Â Â Â //Â 1.Â è·å–æ­Œæ›²å°é¢
Â Â Â Â WebImageManager.shared.requestImage(trackCoverURL)Â {Â resultÂ in
Â Â Â Â Â Â Â Â switchÂ resultÂ {
Â Â Â Â Â Â Â Â caseÂ .success(letÂ image):
Â Â Â Â Â Â Â Â Â Â Â Â //Â 2.Â è·å–ç‰¹æ•ˆé…ç½®
Â Â Â Â Â Â Â Â Â Â Â Â fetchVisualEffectConfig(for:Â trackID)Â {Â resultÂ in
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â switchÂ resultÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â caseÂ .success(letÂ path):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â 3.Â è·å–å°é¢ä¸»é¢˜è‰²
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fetchAlbumColor(trackID:Â trackID)Â {Â resultÂ in
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â switchÂ resultÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â caseÂ .success(letÂ albumColor):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â self.startEffect(coverImage:Â coverImage,Â effectConfig:Â effectConfig,Â coverColor:Â coverColor)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â caseÂ .failure:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¤„ç†è·å–å°é¢é¢œè‰²é”™è¯¯
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â break
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â caseÂ .failure(letÂ error):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¤„ç†è·å–ç‰¹æ•ˆé…ç½®é”™è¯¯
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â break
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â caseÂ .failure(letÂ error):
Â Â Â Â Â Â Â Â Â Â Â Â //Â å¤„ç†ä¸‹è½½å›¾ç‰‡é”™è¯¯
Â Â Â Â Â Â Â Â Â Â Â Â break
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}

```

ä½¿ç”¨ Combineï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸‰ä¸ªè¯·æ±‚å°è£…æˆå•ç‹¬çš„ `Publisher`ï¼Œå†é€šè¿‡ `combineLatest` å°†ä¸‰ä¸ªç»“æœåˆå¹¶åœ¨ä¸€èµ·è¿›è¡Œä½¿ç”¨ï¼š

```
funcÂ startEffect()Â {
Â Â Â Â //Â è·å–æ­Œæ›²å°é¢çš„Â Publisher
Â Â Â Â cancellableÂ =Â fetchTrackCoverImagePublisher(for:Â trackCoverURL)
Â Â Â Â Â Â Â Â //Â å¹¶ä¸Â è·å–ç‰¹æ•ˆé…ç½®çš„Â PublisherÂ å’ŒÂ è·å–ä¸“è¾‘ä¸»é¢˜è‰²çš„Â PublisherÂ ä¸­çš„æœ€æ–°ç»“æœç»„æˆæ–°çš„Â Publisher
Â Â Â Â Â Â Â Â .combineLatest(fetchVisualEffectPathPublisher(for:Â trackID),Â fetchAlbumColorPublisher(trackID:Â trackID))
Â Â Â Â Â Â Â Â //Â å¯¹æœ€ç»ˆçš„ç»“æœè¿›è¡Œä½¿ç”¨
Â Â Â Â Â Â Â Â .sinkÂ {Â completionÂ in
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ caseÂ .failure(letÂ error)Â =Â completionÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯¹é”™è¯¯è¿›è¡Œå¤„ç†
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }Â receiveValue:Â {Â (coverImage,Â effectConfig,Â coverColor)Â in
Â Â Â Â Â Â Â Â Â Â Â Â self.startEffect(coverImage:Â coverImage,Â effectConfig:Â effectConfig,Â coverColor:Â coverColor)
Â Â Â Â Â Â Â Â }
}

```

è¿™æ ·çš„å®ç°æ–¹å¼å¸¦æ¥äº†å¾ˆå¤šå¥½å¤„ï¼š

1. ä»£ç ç»“æ„æ›´ç´§å‡‘ï¼Œå¯è¯»æ€§æ›´å¥½
2. é”™è¯¯å¤„ç†æ›´é›†ä¸­ï¼Œä¸æ˜“é—æ¼
3. å¯ç»´æŠ¤æ€§æ›´å¥½ï¼Œåç»­å¦‚æœéœ€è¦æ–°çš„è¯·æ±‚ï¼Œåªéœ€ç»§ç»­ combine æ–°çš„ Publisher å³å¯

æ­¤å¤–ï¼ŒResso ä¹Ÿå¯¹è‡ªå·±çš„ç½‘ç»œåº“å®ç°äº† Combine æ‹“å±•ï¼Œæ–¹ä¾¿æ›´å¤šçš„åŒå­¦å¼€å§‹ä½¿ç”¨ Combineï¼š

```
funcÂ fetchSomeResource()Â ->Â RestfulClient<SomeResponse>.DataTaskPublisher{
Â Â Â Â letÂ requestÂ =Â SomeRequest()
Â Â Â Â returnÂ RestfulClient<SomeResponse>(request:Â request)
Â Â Â Â Â Â Â Â Â Â Â Â .dataTaskPublisher
}

```

## æ€»ç»“

ä¸€è¨€ä»¥è”½ä¹‹ï¼Œå“åº”å¼ç¼–ç¨‹çš„æ ¸å¿ƒåœ¨äº**ç”¨å£°æ˜çš„æ–¹å¼å“åº”æœªæ¥å‘ç”Ÿçš„äº‹ä»¶æµã€‚**åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œåˆç†åœ°ä½¿ç”¨å“åº”å¼ç¼–ç¨‹å¯ä»¥å¤§å¹…ç®€åŒ–ä»£ç é€»è¾‘ï¼Œä½†åœ¨ä¸é€‚å®œçš„åœºæ™¯ï¼ˆç”šè‡³æ˜¯æ‰€æœ‰åœºæ™¯ï¼‰æ»¥ç”¨åˆ™ä¼šè®©åŒäº‹ ğŸ¤¬ã€‚å¸¸è§çš„å¤šé‡åµŒå¥—å›è°ƒã€è‡ªå®šä¹‰çš„é€šçŸ¥éƒ½æ˜¯éå¸¸é€‚åˆåˆ‡å…¥ä½¿ç”¨çš„åœºæ™¯ã€‚

Combine æ˜¯å“åº”å¼ç¼–ç¨‹çš„ä¸€ç§å…·ä½“å®ç°ï¼Œç³»ç»ŸåŸç”Ÿå†…ç½®ä¸ä¼˜ç§€çš„å®ç°è®©å®ƒç›¸è¾ƒäºå…¶ä»–å“åº”å¼æ¡†æ¶æœ‰ç€è¯¸å¤šçš„ä¼˜åŠ¿ï¼Œå­¦ä¹ å¹¶æŒæ¡ Combine æ˜¯å®è·µå“åº”å¼ç¼–ç¨‹çš„ç»ä½³é€”å¾„ï¼Œå¯¹æ—¥å¸¸å¼€å‘ä¹Ÿæœ‰è¯¸å¤šæ¯—ç›Šã€‚

åŠ å…¥æˆ‘ä»¬

æˆ‘ä»¬æ˜¯**å­—èŠ‚è·³åŠ¨å›½é™…éŸ³ä¹å›¢é˜Ÿ**ï¼Œè´Ÿè´£ Resso ç­‰å¤šå—å›½é™…éŸ³ä¹ä¸šåŠ¡ï¼å›¢é˜Ÿè‡´åŠ›äºä½¿ç”¨æ›´å…ˆè¿›çš„è¯­è¨€ï¼ˆSwift & Kotlinï¼‰ä¸æ›´å…ˆè¿›çš„æŠ€æœ¯ï¼Œ å¸¦ç»™ç”¨æˆ·æµç•…çš„æ’­æ”¾ä½“éªŒï¼Œæè‡´çš„äº¤äº’å“åº”ã€‚åœ¨è¿™é‡Œå¯ä»¥å¸æ”¶åˆ°ç‚¹æ’­ï¼Œç›´æ’­ï¼Œç ç‡ç­‰å¤šä¸ªç»´åº¦çš„æŠ€æœ¯å…»åˆ†ï¼Œäº†è§£å¦‚ä½•é€šè¿‡é¢„åŠ è½½ã€ç ç‡è‡ªé€‚åº”ã€åŠ¨æ€æ°´ä½ç­‰æ‰‹æ®µæŒç»­ä¼˜åŒ–æ ¸å¿ƒæŒ‡æ ‡ï¼Œä¸€åŒæ¨è¿›ç¨³å®šæ€§æ²»ç†ã€å®¢æˆ·ç«¯å®¹ç¾ã€åŒ…å¤§å°ã€UI æµç•…åº¦ã€ä½ç«¯æœºç­‰ä¸“é¡¹ï¼ŒæŒç»­æ‰“ç£¨åŸºç¡€ä½“éªŒï¼Œä¿éšœ App ç¨³å®šè¿è¡Œã€‚

å¦‚æœä½ ä¹Ÿæ˜¯éŸ³ä¹å‘çƒ§å‹ï¼Œå¦‚æœä½ å¯¹å…¨çƒéŸ³ä¹è¡Œä¸šå‘å±•/éŸ³ä¹äººç”Ÿæ€/éŸ³ä¹äº§å“æ¼”åŒ–/éŸ³ä¹åˆ›ä½œæ„Ÿå…´è¶£ï¼Œå¦‚æœä½ çš„ç”Ÿæ´»é‡Œé™¤äº† 0 å’Œ 1ï¼Œæ›´æœ‰å¯¹â€œå“†æ¥å’ªå‘å—¦æ‹‰è¥¿â€çš„çƒ­çˆ±ï¼ŒéŸ³ä¹å›¢é˜Ÿï¼Œç­‰ä½ ç«é€Ÿä¸Šè½¦ï¼šhttps://jobs.bytedance.com/referral/pc/position/6984694058811771144/detailã€‚

## å‚è€ƒ

- https://www.vadimbulavin.com/debugging-with-combine-swift-framework/
- https://objccn.io/products/swift-ui

**ç‚¹å‡»â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹å²—ä½è¯¦æƒ…ï¼**