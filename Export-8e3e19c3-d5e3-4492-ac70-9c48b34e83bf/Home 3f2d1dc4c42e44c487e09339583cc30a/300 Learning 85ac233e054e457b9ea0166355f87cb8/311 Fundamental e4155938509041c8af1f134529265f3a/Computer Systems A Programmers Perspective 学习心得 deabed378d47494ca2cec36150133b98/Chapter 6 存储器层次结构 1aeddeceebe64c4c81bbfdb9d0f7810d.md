# Chapter 6 存储器层次结构

这个思想围绕着计算机程序的一个称为局部性 (locality) 的 基本属 性。具有良好局部性 的程序倾向于一次又一次地访问相同的数据项集合，或是倾向千访问邻近的数据项集合。

## 6.1 存储技术

### 6.1.1 随机访问存储器

随机访问存储器 (Random-Access Memory, RAM) 分为两类:

- 静态 SRAM： 高速缓存，不过几兆。始终处于两种状态中的一种
- 动态 DRAM： 系统主存和图形西塘的帧缓存区

> SRAM 和 DRAM 存储器的特性。只要有供电， SRAM 就会保持不变 。 与 DRAM 不同，它不需要刷新 。 SRAM 的存取比 DRAM 快 。 SRAM 对诸如光和电噪声 这样的干扰不敏感。代价是 SRAM 单元比 DRAM 单元使用 更多 的晶体管，因而密 集低，而且更 贵 ，功耗更大。
> 

![Untitled](Chapter%206%20%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84%201aeddeceebe64c4c81bbfdb9d0f7810d/Untitled.png)

## 6.2 局部性

一个编写良好的计 算 机 程序常常具 有良好的局部性 Clocality) 。也就是，它们倾向于引 用邻近于其他最近引用过的 数据项的数据项，或者最近引用过的数据项本身。这种倾向 性，被称为局部性原理 (principle of locality), 是 一 个持 久 的概念，对硬件和软件系统的设 计和性能都有着极大的 影 响 。

### 6.2.3 局部性小结

局部性的一些简单原则:

- 重复引用相同变量的程序有良好的时间局部性。
- 对于具有步长为 K 的引用模式的程序，步长越小，空间局部性越好。具有步长为 l的引用模式的程序有很好的空间局部性。在内存中以大步长跳来跳去的程序空间局部性会很差。
- 对于取指令来说，循环有好的时间和空间局部性。循环体越小，循环迭代次数越多，局部性越好 。

### 6.3.2 存储器层次结构概念小结

- 利用时间局部性:由于时间局部性，同一数据对象可能会被多次使用。 一旦 一个数
据对象在第一次不命中时被复制到缓存中，我们就会期望后面对该目标有 一系 列的 访问命中。因为缓存比低一层的存储设备更快，对后面的命中的服务会比最开始的 不命中快很多 。
- 利用空间局部性:块通常包含有多个数据对象。由千 空 间局部性，我们会期望后面 对该块中其他对象的访问能够补偿不命中后复制该块的花费。