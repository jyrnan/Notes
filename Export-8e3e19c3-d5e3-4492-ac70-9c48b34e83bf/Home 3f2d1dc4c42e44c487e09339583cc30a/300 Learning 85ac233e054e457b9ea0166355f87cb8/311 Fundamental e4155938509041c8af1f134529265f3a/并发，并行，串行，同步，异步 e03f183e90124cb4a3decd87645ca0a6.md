# 并发，并行，串行，同步，异步

# **并发与并行（Concurrent & Parallel）**

## **并发**

**并发编程又叫多线程编程。**

并发的实质是一个物理CPU(也可以多个物理CPU) 在若干道程序之间多路复用，

并发性是对有限物理资源强制行使多用户共享以提高效率。

(并发指的是任务数多余cpu核数，通过操作系统的各种任务调度算法，实现用多个任务“一起”执行（实际上总有一些任务不在执行，因为切换任务的速度相当快，看上去一起执行而已））

**并发当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程，它只能把CPU运行时间划分成若干个时间段,再将时间 段分配给各个线程执行，在一个时间段的线程代码运行时，其它线程处于挂起状。这种方式我们称之为并发(Concurrent)。**

## 并行

 **“并行”**指两个或两个以上事件或活动在**同一时刻**发生。在多道程序环境下，并行性使多个程序同一时刻可在不同CPU上**同时**执行。（hadoop集群就是并行计算的）

**当系统有一个以上CPU时,则线程的操作有可能非并发。当一个CPU执行一个线程时，另一个CPU可以执行另一个线程，两个线程互不抢占CPU资源，可以同时进行，这种方式我们称之为并行(Parallel)。**

<aside>
💡 并发和并行 ，是即相似又有区别的两个概念**并行是指两个或者多个事件在同一时刻发生；**而**并发是指两个或多个事件在同一时间间隔内发生。**

在多道程序环境下，并发性是指在一段时间内宏观上有多个程序在同时运行，但在单处理机系统中，每一时刻却仅能有一道程序执行，故微观上这些程序只能是分时地交替执行。

倘若在计算机系统中有多个处理机，则这些可以并发执行的程序便可被分配到多个处理机上，实现并行执行，即利用每个处理机来处理一个可并发执行的程序，这样，多个程序便可以同时执行。

</aside>

# **串行、并行：**

并行和串行指的是**任务的执行方式**。

串行是指多个任务时，各个任务按顺序执行，完成一个之后才能进行下一个。

并行指的是多个任务可以同时执行，异步是多个任务并行的前提条件。

# **同步、异步：**

 **同步、异步**指的是任务执行的方式。

两者的主要区别是：**是否等待队列的任务执行结束，以及是否具备开启新线程的能力。**

**同步执行（sync）**：
• 同步添加任务到指定的队列中，在添加的任务执行结束之前，会一直等待，直到队列里面的任务完成之后再继续执行。
• 只能在当前线程中执行任务，不具备开启新线程的能力。**异步执行（async）**：
• 异步添加任务到指定的队列中，它不会做任何等待，可以继续执行任务。
• 可以在新的线程中执行任务，具备开启新线程的能力。

## **线程就是实现异步的一个方式。**

异步是让调用方法的主线程不需要同步等待另一线程的完成，从而可以让主线程干其它的事情。

异步和多线程并不是一个同等关系, 异步是最终目的,  多线程只是我们实现异步的一种手段。

异步是当一个调用请求发送给被调用者 ,   而调用者不用等待其结果的返回而可以做其它的事情。

实现异步可以采用多线程技术或者交给另外的进程来处理。

## 网络资料的解释：

关于这个问题，我想做一个很形象的类比，来帮助大家对 **队列**、**任务** 以及 **线程** 之间关系的理解。

> 假设现在有 5 个人要穿过一道门禁，这道门禁总共有 10 个入口，管理员可以决定同一时间打开几个入口，可以决定同一时间让一个人单独通过还是多个人一起通过。不过默认情况下，管理员只开启一个入口，且一个通道一次只能通过一个人。
> 
> - 这个故事里，人好比是 **任务**，管理员好比是 **系统**，入口则代表 **线程**。
>     - 5 个人表示有 5 个任务，10 个入口代表 10 条线程。
>     - **串行队列** 好比是 5 个人排成一支长队。
>     - **并发队列** 好比是 5 个人排成多支队伍，比如 2 队，或者 3 队。
>     - **同步任务** 好比是管理员只开启了一个入口（当前线程）。
>     - **异步任务** 好比是管理员同时开启了多个入口（当前线程 + 新开的线程）。
> - **『异步执行 + 并发队列』** 可以理解为：现在管理员开启了多个入口（比如 3 个入口），5 个人排成了多支队伍（比如 3 支队伍），这样这 5 个人就可以 3 个人同时一起穿过门禁了。
> - **『同步执行 + 并发队列』** 可以理解为：现在管理员只开启了 1 个入口，5 个人排成了多支队伍。虽然这 5 个人排成了多支队伍，但是只开了 1 个入口啊，这 5 个人虽然都想快点过去，但是 1 个入口一次只能过 1 个人，所以大家就只好一个接一个走过去了，表现的结果就是：顺次通过入口。
> - 换成 GCD 里的语言就是说：
>     - 『异步执行 + 并发队列』就是：系统开启了多个线程（主线程+其他子线程），任务可以多个同时运行。
>     - 『同步执行 + 并发队列』就是：系统只默认开启了一个主线程，没有开启子线程，虽然任务处于并发队列中，但也只能一个接一个执行了。

作者：ITCharge

链接：https://juejin.cn/post/6844903566398717960

来源：稀土掘金

著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。